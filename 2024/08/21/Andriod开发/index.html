<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hunter1023.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":false,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":3,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Android StudioGoogle将JDK、Android SDK都集成了，Android官方网就可以下载最新的开发工具：下载 Android Studio  创建Android项目 New Project - Phone and Tablet - Empty Activity     Minimum SDK：设置项目最低能兼容的Android版本">
<meta property="og:type" content="article">
<meta property="og:title" content="Andriod开发">
<meta property="og:url" content="https://hunter1023.github.io/2024/08/21/Andriod%E5%BC%80%E5%8F%91/index.html">
<meta property="og:site_name" content="Talk is cheap">
<meta property="og:description" content="Android StudioGoogle将JDK、Android SDK都集成了，Android官方网就可以下载最新的开发工具：下载 Android Studio  创建Android项目 New Project - Phone and Tablet - Empty Activity     Minimum SDK：设置项目最低能兼容的Android版本">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2024/08/21/auXJVFt4Gpbr3q9.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/21/dywvCXaseKBLMJ8.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/21/czXGKYqoWFU3nEx.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/21/iCsF69uxLj4tnUz.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/21/Th7e4pGWv6ZUBXm.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/21/2HsGpRr6qdLcS95.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/21/aVLYBnUze16Pikr.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/21/5CfpaSwdAqGE3sb.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/21/326YDJKvoMECnPN.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/22/1T6BcFdIQ3v8puO.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/22/vc9Pi1eEgmD6n4d.png">
<meta property="og:image" content="https://s2.loli.net/2024/10/11/c2p3FTqPvyAQwsX.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/22/y4QbNKG83mzXFC7.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/22/gqb4Ak6pfsez7Cv.png">
<meta property="og:image" content="https://s2.loli.net/2024/10/11/thQVKsYSNirZwnD.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/22/PtF5veIp4JU3D1r.png">
<meta property="og:image" content="https://s2.loli.net/2024/10/13/3KYjlr1HqzP6MtV.png">
<meta property="og:image" content="https://s2.loli.net/2024/10/14/v9y2kpGUVYwHnFZ.png">
<meta property="og:image" content="https://s2.loli.net/2024/10/14/GbgDcTqRlWEf1ui.png">
<meta property="og:image" content="https://s2.loli.net/2024/10/15/ynPcskNGg2FAWCY.png">
<meta property="og:image" content="https://s2.loli.net/2024/10/16/KU4iCTbdWgSVeka.png">
<meta property="og:image" content="https://s2.loli.net/2024/10/16/cflQUmTFhkprDgZ.png">
<meta property="og:image" content="c:\Users\Hunter\AppData\Roaming\Typora\typora-user-images\image-20241016223814163.png">
<meta property="og:image" content="c:\Users\Hunter\AppData\Roaming\Typora\typora-user-images\image-20241016224713577.png">
<meta property="og:image" content="https://s2.loli.net/2024/10/16/nkjSplyxhY8qgOW.png">
<meta property="og:image" content="https://s2.loli.net/2024/10/16/gDGIu9BlZFjvXer.png">
<meta property="og:image" content="https://s2.loli.net/2024/10/16/DNOReZrHQFbCunB.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/22/UeRpVZxiWrNSgt9.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/22/kOVt4mjaJrqcTQ3.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/23/hLz7XnN8KlAdFaH.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/25/CnGb1dBNYhkZOMi.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/25/X69kUeFWP1JVb4S.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/25/oBz8nRv4mtaUHZe.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/25/PV98csde3xnESCZ.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/27/nS7Xd4Apgao8qQW.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/27/pXzCfiuhVIs6HUw.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/27/J6uNxqoGTtDVCKE.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/28/cqBDQh5okYt4MKz.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/28/tZU3ksNxyqH9AD5.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/28/gzXWNeG1RThOjlx.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/28/eMk5nXpBaJ7OdCA.png">
<meta property="og:image" content="https://s2.loli.net/2024/08/28/bdjyQ3R9WFhmSTt.png">
<meta property="article:published_time" content="2024-08-21T04:19:03.000Z">
<meta property="article:modified_time" content="2025-02-13T13:11:45.000Z">
<meta property="article:author" content="Hunter">
<meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2024/08/21/auXJVFt4Gpbr3q9.png">


<link rel="canonical" href="https://hunter1023.github.io/2024/08/21/Andriod%E5%BC%80%E5%8F%91/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://hunter1023.github.io/2024/08/21/Andriod%E5%BC%80%E5%8F%91/","path":"2024/08/21/Andriod开发/","title":"Andriod开发"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Andriod开发 | Talk is cheap</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Talk is cheap</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Android-Studio"><span class="nav-number">1.</span> <span class="nav-text">Android Studio</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAAndroid%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.1.</span> <span class="nav-text">创建Android项目</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Android%E6%A8%A1%E6%8B%9F%E5%99%A8"><span class="nav-number">1.2.</span> <span class="nav-text">Android模拟器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">1.3.</span> <span class="nav-text">项目结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AndroidManifest-xml"><span class="nav-number">1.4.</span> <span class="nav-text">AndroidManifest.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E8%B5%84%E6%BA%90%E4%BD%BF%E7%94%A8"><span class="nav-number">1.5.</span> <span class="nav-text">项目中的资源使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#app%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84-build-gradle-kts"><span class="nav-number">1.6.</span> <span class="nav-text">app目录下的 build.gradle.kts</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#settings-gradle-kts"><span class="nav-number">1.7.</span> <span class="nav-text">settings.gradle.kts</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">1.8.</span> <span class="nav-text">日志工具的使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Activity"><span class="nav-number">2.</span> <span class="nav-text">Activity</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="nav-number">2.1.</span> <span class="nav-text">基本用法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BAActivity"><span class="nav-number">2.1.1.</span> <span class="nav-text">手动创建Activity</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BC%A0%E7%BB%9F%E7%9A%84%E8%A7%86%E5%9B%BE%E7%B3%BB%E7%BB%9F%EF%BC%9AActivity-%E4%B8%8B%E7%9A%84-Empty-Views-Activity"><span class="nav-number">2.1.1.1.</span> <span class="nav-text">传统的视图系统：Activity 下的 Empty Views Activity</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F-UI-%E7%BC%96%E7%A8%8B%EF%BC%9ACompose-%E4%B8%8B%E7%9A%84-Empty-Activity"><span class="nav-number">2.1.1.2.</span> <span class="nav-text">声明式 UI 编程：Compose 下的 Empty Activity</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E5%8A%A0%E8%BD%BD%E5%B8%83%E5%B1%80"><span class="nav-number">2.1.2.</span> <span class="nav-text">创建和加载布局</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BC%A0%E7%BB%9F%E7%9A%84%E8%A7%86%E5%9B%BE%E7%B3%BB%E7%BB%9F"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">传统的视图系统</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F-UI-%E7%BC%96%E7%A8%8B"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">声明式 UI 编程</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AndroidManifest-xml-1"><span class="nav-number">2.1.3.</span> <span class="nav-text">AndroidManifest.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8Toast"><span class="nav-number">2.1.4.</span> <span class="nav-text">使用Toast</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8Menu"><span class="nav-number">2.1.5.</span> <span class="nav-text">使用Menu</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%94%80%E6%AF%81%E4%B8%80%E4%B8%AAActivity"><span class="nav-number">2.1.6.</span> <span class="nav-text">销毁一个Activity</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8Intent%E5%9C%A8Activity%E4%B9%8B%E9%97%B4%E7%A9%BF%E6%A2%AD"><span class="nav-number">2.2.</span> <span class="nav-text">使用Intent在Activity之间穿梭</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%98%BE%E5%BC%8FIntent"><span class="nav-number">2.2.1.</span> <span class="nav-text">使用显式Intent</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%9A%90%E5%BC%8FIntent"><span class="nav-number">2.2.2.</span> <span class="nav-text">使用隐式Intent</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9A%90%E5%BC%8FIntent%E7%9A%84%E6%9B%B4%E5%A4%9A%E7%94%A8%E6%B3%95"><span class="nav-number">2.2.3.</span> <span class="nav-text">隐式Intent的更多用法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="nav-number">2.2.3.1.</span> <span class="nav-text">调用浏览器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E6%8B%A8%E5%8F%B7%E7%95%8C%E9%9D%A2"><span class="nav-number">2.2.3.2.</span> <span class="nav-text">调用拨号界面</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%91%E4%B8%8B%E4%B8%80%E4%B8%AAActivity%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE"><span class="nav-number">2.2.4.</span> <span class="nav-text">向下一个Activity传递数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE%E7%BB%99%E4%B8%8A%E4%B8%80%E4%B8%AAActivity"><span class="nav-number">2.2.5.</span> <span class="nav-text">返回数据给上一个Activity</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Activity%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">2.3.</span> <span class="nav-text">Activity的生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E6%A0%88"><span class="nav-number">2.3.1.</span> <span class="nav-text">返回栈</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Activity%E7%8A%B6%E6%80%81"><span class="nav-number">2.3.2.</span> <span class="nav-text">Activity状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Activity%E7%9A%84%E7%94%9F%E5%AD%98%E6%9C%9F"><span class="nav-number">2.3.3.</span> <span class="nav-text">Activity的生存期</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Activity%E8%A2%AB%E5%9B%9E%E6%94%B6%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E"><span class="nav-number">2.3.4.</span> <span class="nav-text">Activity被回收了怎么办</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Activity%E7%9A%84%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">2.4.</span> <span class="nav-text">Activity的启动模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#standard"><span class="nav-number">2.4.1.</span> <span class="nav-text">standard</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#singleTop"><span class="nav-number">2.4.2.</span> <span class="nav-text">singleTop</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#singleTask"><span class="nav-number">2.4.3.</span> <span class="nav-text">singleTask</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#singleInstance"><span class="nav-number">2.4.4.</span> <span class="nav-text">singleInstance</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Activity%E7%9A%84%E5%AE%9E%E8%B7%B5%E6%8A%80%E5%B7%A7"><span class="nav-number">2.5.</span> <span class="nav-text">Activity的实践技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9F%A5%E6%99%93%E5%BD%93%E5%89%8D%E6%98%AF%E5%9C%A8%E5%93%AA%E4%B8%80%E4%B8%AAActivity"><span class="nav-number">2.5.1.</span> <span class="nav-text">知晓当前是在哪一个Activity</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9A%8F%E6%97%B6%E9%80%80%E5%87%BA%E7%A8%8B%E5%BA%8F"><span class="nav-number">2.5.2.</span> <span class="nav-text">随时退出程序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8Activity%E7%9A%84%E6%9C%80%E4%BD%B3%E5%86%99%E6%B3%95"><span class="nav-number">2.5.3.</span> <span class="nav-text">启动Activity的最佳写法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UI%E5%BC%80%E5%8F%91"><span class="nav-number">3.</span> <span class="nav-text">UI开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%8E%A7%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">3.1.</span> <span class="nav-text">常用控件的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TextView"><span class="nav-number">3.1.1.</span> <span class="nav-text">TextView</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Button"><span class="nav-number">3.1.2.</span> <span class="nav-text">Button</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#EditText"><span class="nav-number">3.1.3.</span> <span class="nav-text">EditText</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ImageView"><span class="nav-number">3.1.4.</span> <span class="nav-text">ImageView</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ProgressBar"><span class="nav-number">3.1.5.</span> <span class="nav-text">ProgressBar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AlertDialog"><span class="nav-number">3.1.6.</span> <span class="nav-text">AlertDialog</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80"><span class="nav-number">3.2.</span> <span class="nav-text">基本布局</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#LinearLayout"><span class="nav-number">3.2.1.</span> <span class="nav-text">LinearLayout</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RelativeLayout"><span class="nav-number">3.2.2.</span> <span class="nav-text">RelativeLayout</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#FrameLayout"><span class="nav-number">3.2.3.</span> <span class="nav-text">FrameLayout</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6"><span class="nav-number">3.3.</span> <span class="nav-text">自定义控件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%95%E5%85%A5%E5%B8%83%E5%B1%80"><span class="nav-number">3.3.1.</span> <span class="nav-text">引入布局</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6"><span class="nav-number">3.3.2.</span> <span class="nav-text">创建自定义控件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E5%B8%B8%E7%94%A8%E4%B8%94%E6%9C%80%E9%9A%BE%E7%94%A8%E7%9A%84%E6%8E%A7%E4%BB%B6%EF%BC%9AListView"><span class="nav-number">3.4.</span> <span class="nav-text">最常用且最难用的控件：ListView</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ListView%E7%9A%84%E7%AE%80%E5%8D%95%E7%94%A8%E6%B3%95"><span class="nav-number">3.4.1.</span> <span class="nav-text">ListView的简单用法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E5%88%B6ListView%E7%95%8C%E9%9D%A2"><span class="nav-number">3.4.2.</span> <span class="nav-text">定制ListView界面</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Jetpack-Compose"><span class="nav-number">4.</span> <span class="nav-text">Jetpack Compose</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Android-UI-Toolkit"><span class="nav-number">4.1.</span> <span class="nav-text">Android UI Toolkit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Composable-%E5%87%BD%E6%95%B0"><span class="nav-number">4.2.</span> <span class="nav-text">Composable 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%BE%E7%A4%BAComposables"><span class="nav-number">4.3.</span> <span class="nav-text">显示Composables</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84Composable%E5%87%BD%E6%95%B0"><span class="nav-number">4.4.</span> <span class="nav-text">基本的Composable函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Text"><span class="nav-number">4.4.1.</span> <span class="nav-text">Text</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A2%84%E8%A7%88"><span class="nav-number">4.4.2.</span> <span class="nav-text">预览</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TextField"><span class="nav-number">4.4.3.</span> <span class="nav-text">TextField</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-OutlinedTextField-%E6%B7%BB%E5%8A%A0Email%E5%AD%97%E6%AE%B5"><span class="nav-number">4.4.3.1.</span> <span class="nav-text">使用 OutlinedTextField 添加Email字段</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Button-1"><span class="nav-number">4.4.4.</span> <span class="nav-text">Button</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#RadioButton"><span class="nav-number">4.4.4.1.</span> <span class="nav-text">RadioButton</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#FloatingActionButton"><span class="nav-number">4.4.4.2.</span> <span class="nav-text">FloatingActionButton</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B6%E4%BB%96Button"><span class="nav-number">4.4.4.3.</span> <span class="nav-text">其他Button</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Progress-Bars"><span class="nav-number">4.4.5.</span> <span class="nav-text">Progress Bars</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#CircularProgressIndicator"><span class="nav-number">4.4.5.1.</span> <span class="nav-text">CircularProgressIndicator</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#LinearProgressIndicator"><span class="nav-number">4.4.5.2.</span> <span class="nav-text">LinearProgressIndicator</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AlertDialog-1"><span class="nav-number">4.4.6.</span> <span class="nav-text">AlertDialog</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Layout-%E5%B8%83%E5%B1%80"><span class="nav-number">4.5.</span> <span class="nav-text">Layout 布局</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Linear-Layouts"><span class="nav-number">4.5.1.</span> <span class="nav-text">Linear Layouts</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Row-%E8%A1%8C"><span class="nav-number">4.5.1.1.</span> <span class="nav-text">Row 行</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Column-%E5%88%97"><span class="nav-number">4.5.1.2.</span> <span class="nav-text">Column 列</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Box"><span class="nav-number">4.5.2.</span> <span class="nav-text">Box</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Surface"><span class="nav-number">4.5.3.</span> <span class="nav-text">Surface</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Scaffold"><span class="nav-number">4.5.4.</span> <span class="nav-text">Scaffold</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E5%BB%BALists"><span class="nav-number">4.6.</span> <span class="nav-text">构建Lists</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Scrolling-Modifier"><span class="nav-number">4.6.1.</span> <span class="nav-text">Scrolling Modifier</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LazyColumn-%E5%92%8C-LazyRow"><span class="nav-number">4.6.2.</span> <span class="nav-text">LazyColumn 和 LazyRow</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Compose%E4%B8%AD%E7%9A%84Grid"><span class="nav-number">4.6.3.</span> <span class="nav-text">Compose中的Grid</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%90%AD%E5%BB%BA%E5%BA%94%E7%94%A8Jet-Notes"><span class="nav-number">4.7.</span> <span class="nav-text">搭建应用Jet Notes</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E4%B8%8B%E8%80%8C%E4%B8%8A%E7%9A%84%E6%9E%84%E5%BB%BA%E6%96%B9%E6%B3%95"><span class="nav-number">4.7.1.</span> <span class="nav-text">自下而上的构建方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Note"><span class="nav-number">4.7.2.</span> <span class="nav-text">Note</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Hunter</p>
  <div class="site-description" itemprop="description">Tough times never last, but tough people do.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">98</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">175</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://hunter1023.github.io/2024/08/21/Andriod%E5%BC%80%E5%8F%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hunter">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Talk is cheap">
      <meta itemprop="description" content="Tough times never last, but tough people do.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Andriod开发 | Talk is cheap">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Andriod开发<a href="https://github.com/Hunter1023/hexo_blog/edit/gh-pages/source/_posts/Andriod%E5%BC%80%E5%8F%91.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-08-21 12:19:03" itemprop="dateCreated datePublished" datetime="2024-08-21T12:19:03+08:00">2024-08-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-13 21:11:45" itemprop="dateModified" datetime="2025-02-13T21:11:45+08:00">2025-02-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="Android-Studio"><a href="#Android-Studio" class="headerlink" title="Android Studio"></a>Android Studio</h2><p>Google将JDK、Android SDK都集成了，Android官方网就可以下载最新的开发工具：<a target="_blank" rel="noopener" href="https://developer.android.google.cn/studio?hl=zh-cn">下载 Android Studio</a></p>
<hr>
<h3 id="创建Android项目"><a href="#创建Android项目" class="headerlink" title="创建Android项目"></a>创建Android项目</h3><ol>
<li><code>New Project</code> - <code>Phone and Tablet</code> - <code>Empty Activity</code></li>
</ol>
<img src="https://s2.loli.net/2024/08/21/auXJVFt4Gpbr3q9.png" alt="image-20240821123557291" style="zoom:80%;" />

<ol start="2">
<li><code>Minimum SDK</code>：设置项目最低能兼容的Android版本</li>
</ol>
<span id="more"></span>

<hr>
<h3 id="Android模拟器"><a href="#Android模拟器" class="headerlink" title="Android模拟器"></a>Android模拟器</h3><ol>
<li><code>Device Manager</code> - <code>Create Virtual Device</code></li>
</ol>
<img src="https://s2.loli.net/2024/08/21/dywvCXaseKBLMJ8.png" alt="image-20240821124808648" style="zoom:80%;" />

<ol start="2">
<li>选择目标参数的设备</li>
</ol>
<img src="https://s2.loli.net/2024/08/21/czXGKYqoWFU3nEx.png" alt="image-20240821125040156" style="zoom:80%;" />

<ol start="3">
<li><p>选择操作系统版本。其余配置全部默认。</p>
<p> <img src="https://s2.loli.net/2024/08/21/iCsF69uxLj4tnUz.png" alt="image-20240821125231735"></p>
</li>
<li><p>点击<code>Start</code>按钮，就会启动模拟器。</p>
<p> <img src="https://s2.loli.net/2024/08/21/Th7e4pGWv6ZUBXm.png" alt="image-20240821125446010"></p>
</li>
<li><p><code>Run &#39;app&#39;</code> 将项目运行到模拟器上</p>
<p> <img src="https://s2.loli.net/2024/08/21/2HsGpRr6qdLcS95.png" alt="image-20240821135026657"></p>
</li>
<li><p>项目成功运行，显示了<code>Hollo Android</code>。打开模拟器中的启动器列表，可以看到已经安装了对应的应用。</p>
 <img src="https://s2.loli.net/2024/08/21/aVLYBnUze16Pikr.png" alt="image-20240821135414741" style="zoom:50%;" /></li>
</ol>
<hr>
<h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><p>任何一个新建的项目都会<strong>默认使用Android模式的项目结构</strong>，但这并不是项目真实的目录结构，而是被Android Studio转换过的。这种项目结构简洁明了，适合进行快速开发，但是对于新手来说可能不易于理解。可以切换成<strong>项目模式</strong>。</p>
<p><img src="https://s2.loli.net/2024/08/21/5CfpaSwdAqGE3sb.png" alt="image-20240821135823142"></p>
<p><img src="https://s2.loli.net/2024/08/21/326YDJKvoMECnPN.png" alt="image-20240821140107800"></p>
<ul>
<li><p><code>.gradle</code>和<code>.idea</code></p>
<p>  放置Android Studio自动生成的文件，无需关心。</p>
</li>
<li><p><code>app</code></p>
<p>  <strong>项目中的代码、资源等内容。</strong></p>
<ul>
<li><p><code>build</code></p>
<p>  编译时自动生成的文件，无需过多关心。</p>
</li>
<li><p><code>src</code></p>
<ul>
<li><p><code>androidTest</code>：编写Android Test测试用例，可以对项目进行一些自动化测试。</p>
</li>
<li><p><code>main</code></p>
<ul>
<li><p><code>java</code>：防止Java和Kotlin代码，默认会自动生成一个<code>MainActivity.kt</code>文件</p>
</li>
<li><p><code>res</code>：项目中使用到的图片、布局、字符串等资源。</p>
<ul>
<li><p><code>drawable</code>：图片</p>
<p>  虽然Android Studio没有帮我们自动生成，但是应该自行创建<code>drawable-xxhdpi</code>等目录。最好能够给同一张图片提供几个不同分辨率的版本，分别放在这些目录下，然后<strong>程序运行的时候，会自动根据当前运行设备分辨率的高低选择加载哪个目录下的图片</strong>。但更多的时候美工只会提供一份图片，这时<strong>把所有图片都放在<code>drawable-xxhdpi</code>目录下就好了，这是最主流的设备分辨率目录</strong>。</p>
</li>
<li><p><code>mipmap</code>：图标</p>
</li>
<li><p><code>values</code>：字符串、颜色、样式、尺寸</p>
</li>
<li><p><code>xml</code>：布局、菜单等</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code>test</code>：编写单元测试用力，对项目进行自动化测试的另一种方式。</p>
</li>
<li><p><code>.gitignore</code>：将<strong>app模块</strong>内指定的目录或文件排除在版本控制之外。</p>
</li>
<li><p><code>build.gradle.kts</code></p>
<p>  <strong>app模块</strong>的gradle构建脚本，通常这个文件中的内容无需修改。</p>
</li>
<li><p><code>proguard-rules.pro</code>：指定项目代码的混淆规则。当代码开发完成后打包成安装包文件，如果不希望代码被哦破解，通常会将代码进行混淆。</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>gradle</p>
<p>  包含gradle wrapper的配置文件，<strong>使用gradle wrapper的方式，不需要提前把gradle下载好，而是根据本地的缓存情况，自动决定是否联网下载</strong>。</p>
<ul>
<li><code>libs.versions.toml</code>：<strong>定义各个依赖库的版本号</strong>，使得依赖管理更加清晰和一致。</li>
</ul>
</li>
<li><p><code>.gitignore</code></p>
<p>  记录git版本控制之外的文件、目录。</p>
</li>
<li><p><code>build.gradle.kts</code></p>
<p>  <strong>项目全局</strong>的gradle构建脚本，通常这个文件中的内容无需修改。</p>
</li>
<li><p><code>gradle.properties</code></p>
<p>  项目全局的gradle配置文件。</p>
</li>
<li><p><code>gradlew</code>和<code>gradlew.bat</code></p>
<p>  用于在命令行中执行gradle命令。</p>
</li>
<li><p><code>local.properties</code></p>
<p>  指定本机中的Andriod SDK路径，自动生成。</p>
</li>
<li><p><code>settings.gradle.kts</code></p>
<p>  指定项目中所有引入的模块。通常情况下都是自动引入。</p>
</li>
</ul>
<hr>
<h3 id="AndroidManifest-xml"><a href="#AndroidManifest-xml" class="headerlink" title="AndroidManifest.xml"></a>AndroidManifest.xml</h3><p><code>app\src\main\AndroidManifest.xml</code>中有如下代码：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--  注册MainActivity，没有注册的Activity是不能使用的  --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
          <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@string/app_name<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@style/Theme.HelloWorld<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!-- 表示该activity是项目的主activity，点击应用图标，首先启动的就是这个Activity --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.action.MAIN<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.category.LAUNCHER<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>MainActivity</code>继承自<code>ComponentActivity</code>，<code>ComponentActivity</code>继承自<code>Activity</code>，<strong><code>Activity</code> 是一个提供用户界面的组件</strong>。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">ComponentActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token comment">// 设置应用程序的UI内容，setContent是一个高阶函数，接受一个lambda表达式作为参数</span>
        setContent <span class="token punctuation">&#123;</span>
            <span class="token comment">// Composable函数，定义了应用程序的主题，HelloWorldTheme包含了整个UI布局</span>
            HelloWorldTheme <span class="token punctuation">&#123;</span>
                <span class="token comment">// A surface container using the 'background' color from the theme</span>
                <span class="token comment">// Surface 也是一个Composable 函数，它提供了一个绘制表面，用于渲染其他Composable 函数</span>
                <span class="token comment">// fillMaxsize修饰符来填充整个屏幕，并使用了主题中定义的背景色</span>
                <span class="token function">Surface</span><span class="token punctuation">(</span>
                    modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    color <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>colorScheme<span class="token punctuation">.</span>background
                <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">// 接收一个字符串参数，在Surface中显示一个问候语</span>
                    <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Android"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"MainActivity"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onCreate execute"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="项目中的资源使用"><a href="#项目中的资源使用" class="headerlink" title="项目中的资源使用"></a>项目中的资源使用</h3><ul>
<li><p><code>app\src\main\res\values\strings.xml</code></p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app_name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>HelloWorld<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>  这里定义了一个应用程序名的字符串，有以下两种方式可以用来引用：</p>
<ol>
<li>在代码中使用通过<code>R.string.app_name</code>。</li>
<li>在XML中使用<code>@string/app_name</code>。</li>
</ol>
<p>  其中<code>string</code>可以被替换，如果是引用的图片资源就可以替换成<code>drawable</code>，如果是引用的应用图标就可以替换成<code>mipmap</code>，如果是引用的布局文件就可以替换成<code>xml</code>，以此类推。</p>
</li>
</ul>
<hr>
<h3 id="app目录下的-build-gradle-kts"><a href="#app目录下的-build-gradle-kts" class="headerlink" title="app目录下的 build.gradle.kts"></a>app目录下的 build.gradle.kts</h3><p>Android Studio<strong>采用Gradle构建项目</strong>。它使用了一种<strong>领域特定语言DSL进行项目布置</strong>，摒弃了如Maven等<strong>基于XML文件的各种繁琐配置</strong>。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token comment">// 该项目使用的Gradle插件，通过 alias 方法引入，这意味着它们的确切 ID 和版本号在 libs.versions.toml 文件中定义。</span>
plugins <span class="token punctuation">&#123;</span>
    <span class="token function">alias</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>androidApplication<span class="token punctuation">)</span>
    <span class="token function">alias</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>jetbrainsKotlinAndroid<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// 项目的Android配置信息</span>
android <span class="token punctuation">&#123;</span>
    namespace <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"com.hunter.helloworld"</span></span>
    compileSdk <span class="token operator">=</span> <span class="token number">34</span>

    defaultConfig <span class="token punctuation">&#123;</span>
        applicationId <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"com.hunter.helloworld"</span></span>
        minSdk <span class="token operator">=</span> <span class="token number">21</span>
        targetSdk <span class="token operator">=</span> <span class="token number">34</span>
        versionCode <span class="token operator">=</span> <span class="token number">1</span>
        versionName <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"1.0"</span></span>

        testInstrumentationRunner <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"androidx.test.runner.AndroidJUnitRunner"</span></span>
        vectorDrawables <span class="token punctuation">&#123;</span>
            <span class="token comment">// 在低于minSdk的版本上使用支持库来支持向量图标</span>
            useSupportLibrary <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
	<span class="token comment">// 配置不同的构建类型</span>
    buildTypes <span class="token punctuation">&#123;</span>
        <span class="token comment">// 发布版本的构建类型</span>
        release <span class="token punctuation">&#123;</span>
            <span class="token comment">// 是否对代码进行混淆</span>
            isMinifyEnabled <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token function">proguardFiles</span><span class="token punctuation">(</span><span class="token function">getDefaultProguardFile</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"proguard-android-optimize.txt"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"proguard-rules.pro"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    compileOptions <span class="token punctuation">&#123;</span>
        sourceCompatibility <span class="token operator">=</span> JavaVersion<span class="token punctuation">.</span>VERSION_1_8
        targetCompatibility <span class="token operator">=</span> JavaVersion<span class="token punctuation">.</span>VERSION_1_8
    <span class="token punctuation">&#125;</span>
    kotlinOptions <span class="token punctuation">&#123;</span>
        jvmTarget <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"1.8"</span></span>
    <span class="token punctuation">&#125;</span>
    buildFeatures <span class="token punctuation">&#123;</span>
        compose <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">&#125;</span>
    composeOptions <span class="token punctuation">&#123;</span>
        kotlinCompilerExtensionVersion <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"1.5.1"</span></span>
    <span class="token punctuation">&#125;</span>
    packaging <span class="token punctuation">&#123;</span>
        resources <span class="token punctuation">&#123;</span>
            excludes <span class="token operator">+=</span> <span class="token string-literal singleline"><span class="token string">"/META-INF/&#123;AL2.0,LGPL2.1&#125;"</span></span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// 在 libs.versions.toml 文件中定义的依赖</span>
dependencies <span class="token punctuation">&#123;</span>

    <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>core<span class="token punctuation">.</span>ktx<span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>ktx<span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>activity<span class="token punctuation">.</span>compose<span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span><span class="token function">platform</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>compose<span class="token punctuation">.</span>bom<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>ui<span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>graphics<span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>tooling<span class="token punctuation">.</span>preview<span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>material3<span class="token punctuation">)</span>
    <span class="token function">testImplementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>junit<span class="token punctuation">)</span>
    <span class="token function">androidTestImplementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>junit<span class="token punctuation">)</span>
    <span class="token function">androidTestImplementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>espresso<span class="token punctuation">.</span>core<span class="token punctuation">)</span>
    <span class="token function">androidTestImplementation</span><span class="token punctuation">(</span><span class="token function">platform</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>compose<span class="token punctuation">.</span>bom<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">androidTestImplementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>test<span class="token punctuation">.</span>junit4<span class="token punctuation">)</span>
    <span class="token function">debugImplementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>tooling<span class="token punctuation">)</span>
    <span class="token function">debugImplementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>androidx<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>test<span class="token punctuation">.</span>manifest<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="settings-gradle-kts"><a href="#settings-gradle-kts" class="headerlink" title="settings.gradle.kts"></a>settings.gradle.kts</h3><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token comment">// gradle插件管理</span>
pluginManagement <span class="token punctuation">&#123;</span>
    <span class="token comment">// 获取插件的仓库</span>
    repositories <span class="token punctuation">&#123;</span>
        google <span class="token punctuation">&#123;</span>
            content <span class="token punctuation">&#123;</span>
                <span class="token function">includeGroupByRegex</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"com\\.android.*"</span></span><span class="token punctuation">)</span>
                <span class="token function">includeGroupByRegex</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"com\\.google.*"</span></span><span class="token punctuation">)</span>
                <span class="token function">includeGroupByRegex</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"androidx.*"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">gradlePluginPortal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// 依赖解析管理</span>
dependencyResolutionManagement <span class="token punctuation">&#123;</span>
    <span class="token comment">// 如果在子项目中自定义了仓库，构建将失败。确保所有子项目使用统一的仓库配置，避免潜在的版本冲突或依赖解析问题。</span>
    repositoriesMode<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>RepositoriesMode<span class="token punctuation">.</span>FAIL_ON_PROJECT_REPOS<span class="token punctuation">)</span>
    repositories <span class="token punctuation">&#123;</span>
        <span class="token function">google</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

rootProject<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"HelloWorld"</span></span>
<span class="token comment">// 包含一个名为 :app 的子项目。:app 通常指的是 Android 应用程序模块。</span>
<span class="token function">include</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">":app"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="日志工具的使用"><a href="#日志工具的使用" class="headerlink" title="日志工具的使用"></a>日志工具的使用</h3><p>Android中的日志工具类是<code>android.util.Log</code>，它提供了5个打印日志的方法：</p>
<ol>
<li><code>Log.v()</code>：verbose，打印那些<strong>最琐碎</strong>、意义最小的日志信息。是Android中最低的日志级别。</li>
<li><code>Log.d()</code>：debug，打印一些调试信息。</li>
<li><code>Log.i()</code>：info，打印一些比较重要的数据，可以帮助分析用户行为。</li>
<li><code>Log.w()</code>：warn。</li>
<li><code>Log.e()</code>：error。</li>
</ol>
<hr>
<p>例如在<code>MainActivity.kt</code>的<code>onCreate()</code>方法中添加一行日志：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">ComponentActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        setContent <span class="token punctuation">&#123;</span>
            <span class="token operator">..</span><span class="token punctuation">.</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">// 第一个参数是tag，一般传入当前类名，便于对日志进行过滤；第二个参数是msg</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"MainActivity"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onCreate execute"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>运行程序，在Android Studio底部工具栏的<code>Logcat</code>中就能看到打印信息。</p>
<p><img src="https://s2.loli.net/2024/08/22/1T6BcFdIQ3v8puO.png" alt="image-20240822142408233"></p>
<hr>
<h2 id="Activity"><a href="#Activity" class="headerlink" title="Activity"></a>Activity</h2><p>Activity是一种<strong>可以包含用户界面的组件，主要用于和用户进行交互</strong>。一个应用程序中可以包含<strong>零个或多个</strong>Activity，但不包含任何Activity的应用程序很少见。</p>
<hr>
<h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><p>新建一个Android项目，选择<code>No Activity</code>，其余选项和之前章节中<a href="#%E5%88%9B%E5%BB%BAAndroid%E9%A1%B9%E7%9B%AE">创建Android项目-Empty Activity</a>保持一致。等待Gradle构建完成后，项目就创建成功了。</p>
<p><img src="https://s2.loli.net/2024/08/22/vc9Pi1eEgmD6n4d.png" alt="image-20240822150739473"></p>
<hr>
<h4 id="手动创建Activity"><a href="#手动创建Activity" class="headerlink" title="手动创建Activity"></a>手动创建Activity</h4><blockquote>
<p><strong>Compose 下的 Empty Activity</strong>: 使用 Jetpack Compose 的声明式 UI 编程，UI 是通过 Kotlin 代码直接编写的，没有 XML 文件。</p>
<p><strong>Activity 下的 Empty Views Activity</strong>: 使用传统的视图系统，UI 是通过 XML 文件定义的，然后在 Activity 中引用这些 XML 布局。</p>
<p><strong>适用场景</strong>:</p>
<ul>
<li><strong>Compose 下的 Activity</strong>: 适合希望使用现代 UI 工具包 Jetpack Compose 开发的项目，特别适合新项目或者希望采用最新技术的项目。</li>
<li><strong>传统 Views Activity</strong>: 适合已有的项目或需要兼容传统视图系统的项目，或者开发者更熟悉传统的视图系统。</li>
</ul>
<p><strong>学习曲线</strong>:</p>
<ul>
<li><strong>Jetpack Compose</strong>: 更现代，但需要学习新的编程范式（声明式 UI）。</li>
<li><strong>传统视图系统</strong>: 更传统，许多开发者已经熟悉。</li>
</ul>
</blockquote>
<p>项目创建成功后，仍然会默认使用Android模式的项目结构，手动改成Project模式。</p>
<hr>
<h5 id="传统的视图系统：Activity-下的-Empty-Views-Activity"><a href="#传统的视图系统：Activity-下的-Empty-Views-Activity" class="headerlink" title="传统的视图系统：Activity 下的 Empty Views Activity"></a>传统的视图系统：Activity 下的 Empty Views Activity</h5><p>右键选择要创建Activity的包，<code>New</code> - <code>Activity</code> - <code>Empty Views Activity</code>，会弹出一个创建Activity的对话框。</p>
<p><img src="https://s2.loli.net/2024/10/11/c2p3FTqPvyAQwsX.png" alt="image-20241011224328104"></p>
<p>不勾选<code>Generate a Layout File</code>，创建完成后，可以看到生成的是一个Kotlin文件：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> FirstActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<hr>
<h5 id="声明式-UI-编程：Compose-下的-Empty-Activity"><a href="#声明式-UI-编程：Compose-下的-Empty-Activity" class="headerlink" title="声明式 UI 编程：Compose 下的 Empty Activity"></a>声明式 UI 编程：Compose 下的 Empty Activity</h5><p>右键选择要创建Activity的包，<code>New</code> - <code>Compose</code> - <code>Empty Activity</code>，会弹出一个创建Activity的对话框。</p>
<p><img src="https://s2.loli.net/2024/08/22/y4QbNKG83mzXFC7.png" alt="image-20240822151537061"></p>
<p><strong>不勾选<code>Launcher Activity</code></strong>，否则<strong>会将创建的Activity设置为当前项目的主Activity</strong>。</p>
<p><img src="https://s2.loli.net/2024/08/22/gqb4Ak6pfsez7Cv.png" alt="image-20240822151714288"></p>
<p>创建完成后，可以看到生成的是一个Kotlin文件：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> TestActivity <span class="token operator">:</span> <span class="token function">ComponentActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        setContent <span class="token punctuation">&#123;</span>
            ActivityTestTheme <span class="token punctuation">&#123;</span>
                <span class="token comment">// A surface container using the 'background' color from the theme</span>
                <span class="token function">Surface</span><span class="token punctuation">(</span>
                    modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    color <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>colorScheme<span class="token punctuation">.</span>background
                <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Android"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">,</span> modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Text</span><span class="token punctuation">(</span>
        text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">!"</span></span><span class="token punctuation">,</span>
        modifier <span class="token operator">=</span> modifier
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation builtin">@Preview</span><span class="token punctuation">(</span>showBackground <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">GreetingPreview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    ActivityTestTheme <span class="token punctuation">&#123;</span>
        <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Android"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="创建和加载布局"><a href="#创建和加载布局" class="headerlink" title="创建和加载布局"></a>创建和加载布局</h4><h5 id="传统的视图系统"><a href="#传统的视图系统" class="headerlink" title="传统的视图系统"></a>传统的视图系统</h5><p>Android程序的设计讲究逻辑和视图分离，最好每个Activity都能对应一个布局，布局用来显示界面内容。</p>
<p>右击<code>app/src/main/res</code>目录，<code>New</code> -&gt; <code>Directory</code>，会弹出一个新建目录的窗口，创建一个layout目录。再对着<code>layout</code>目录右键，<code>New</code> -&gt; <code>Layout Resource File</code>，将布局文件命名为<code>first_layout</code>，根元素默认选择为<code>ConstraintLayout</code>，改用<code>LinearLayout</code>。</p>
<p><img src="https://s2.loli.net/2024/10/11/thQVKsYSNirZwnD.png" alt="image-20241011220755549"></p>
<p>创建出来的xml文件，默认代码为：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>通过<code>&lt;Button&gt;</code>标签，添加一个按钮：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button1<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p><code>android:id</code>：给当前元素定义一个唯一的标识符，之后可以在代码中对其进行操作。</p>
<p>  如果需要在XML中引用一个id，使用<code>@id/id_name</code>语法，定义id的时候，需要使用<code>@+id/id_name</code>。</p>
</li>
<li><p><code>android:layout_width</code>指定当前宽度。</p>
<p>  <code>match_parent</code>表示和父元素一样宽。</p>
</li>
<li><p><code>android:layout_height=&quot;wrap_content&quot;</code></p>
<p>  指定当前高度，<code>wrap_content</code>表示当前元素的高度能刚好包含里面的内容就行。</p>
</li>
<li><p><code>android:text</code>指定元素中显示的文字内容。</p>
</li>
</ul>
<p>一个简单的布局就编写完成了，然后在Activity中加载该布局：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> FirstActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token comment">// 调用 setContentView 给当前Activity加载布局，传入布局文件的id</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>first_layout<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>项目中添加的任何资源，都会在R文件中生成一个相应的资源id</strong>。</p>
<hr>
<h5 id="声明式-UI-编程"><a href="#声明式-UI-编程" class="headerlink" title="声明式 UI 编程"></a>声明式 UI 编程</h5><p>当你使用 Jetpack Compose 时，布局不再通过传统的 XML 文件来定义，而是使用 Kotlin 代码进行声明式编程。Jetpack Compose 是一种现代的 Android UI 工具包，允许你以更直观和可组合的方式构建用户界面。</p>
<p>在 Compose 中，UI 通过 <code>@Composable</code> 注释的函数来定义。每个 <code>@Composable</code> 函数都是一个 UI 组件。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>compose<span class="token punctuation">.</span>material<span class="token punctuation">.</span>Text
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>compose<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>Composable

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">,</span> modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Text</span><span class="token punctuation">(</span>
        text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">!"</span></span><span class="token punctuation">,</span>
        modifier <span class="token operator">=</span> modifier
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>可以使用 <code>@Preview</code> 注解来预览 Composable 函数的效果，而无需运行整个应用。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Preview</span><span class="token punctuation">(</span>showBackground <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">GreetingPreview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    ActivityTestTheme <span class="token punctuation">&#123;</span>
        <span class="token comment">// A surface container using the 'background' color from the theme</span>
        <span class="token function">Surface</span><span class="token punctuation">(</span>
            modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            color <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>colorScheme<span class="token punctuation">.</span>background
        <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Android"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://s2.loli.net/2024/08/22/PtF5veIp4JU3D1r.png" alt="image-20240822162401416"></p>
<hr>
<h4 id="AndroidManifest-xml-1"><a href="#AndroidManifest-xml-1" class="headerlink" title="AndroidManifest.xml"></a>AndroidManifest.xml</h4><p>所有的Activity都要在<code>AndroidManifest.xml</code>中进行注册才能生效。一般情况下，创建的Activity都会被自动注册进来。</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>
                 <span class="token attr-name"><span class="token namespace">android:</span>allowBackup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
                 <span class="token attr-name"><span class="token namespace">android:</span>dataExtractionRules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@xml/data_extraction_rules<span class="token punctuation">"</span></span>
                 <span class="token attr-name"><span class="token namespace">android:</span>fullBackupContent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@xml/backup_rules<span class="token punctuation">"</span></span>
                 <span class="token attr-name"><span class="token namespace">android:</span>icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher<span class="token punctuation">"</span></span>
                 <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@string/app_name<span class="token punctuation">"</span></span>
                 <span class="token attr-name"><span class="token namespace">android:</span>roundIcon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher_round<span class="token punctuation">"</span></span>
                 <span class="token attr-name"><span class="token namespace">android:</span>supportsRtl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
                 <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@style/Theme.ActivityTest<span class="token punctuation">"</span></span>
                 <span class="token attr-name"><span class="token namespace">tools:</span>targetApi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>31<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
                  <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.FirstActivity<span class="token punctuation">"</span></span>
                  <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>android:name</code>用于指定具体注册哪一个Activity。<code>.FirstActivity</code>是相对引用。</li>
</ul>
<p>不过，仅仅是这样注册了Activity，我们的程序仍然不能运行，因为还没有为程序配置主Activity。也就是说，程序运行起来的时候，不知道要首先启动哪个Activity。</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
          <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.FirstActivity<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>This is FirstActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.action.MAIN<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.category.LAUNCHER<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>添加<code>&lt;intent-filter&gt;</code>标签并在其中添加<code>&lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;</code>和<code>&lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;</code>声明即可。</p>
<p>此外，可以使用<code>android:label</code>指定Activity中标题栏的内容。<strong>主Activity指定的label不仅会称为标题栏中的内容，还会成为Launcher中应用程序的名称</strong>。</p>
<hr>
<h4 id="使用Toast"><a href="#使用Toast" class="headerlink" title="使用Toast"></a>使用Toast</h4><p>Toast是Android提供的一种很好的提醒方式，<strong>可以将一些短小的信息通知给用户，并在一段时间后自动消失</strong>，不占用屏幕空间。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> FirstActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token comment">// 调用 setContentView 给当前Activity加载布局，传入布局文件的id</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>first_layout<span class="token punctuation">)</span>

        <span class="token comment">// 调用 findViewById 获取布局文件中定义的元素，返回一个继承自View的泛型对象</span>
        <span class="token keyword">val</span> button1<span class="token operator">:</span> Button <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button1<span class="token punctuation">)</span>
        <span class="token comment">// 为按钮注册点击监听器</span>
        button1<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// 调用 makeText 创建Toast对象，再调用 show 进行展示</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"You clicked Button 1"</span></span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>如果布局文件中的组件很多，使用<code>findViewById</code>就很繁琐，可以通过View Binding来代替，View Binding可以生成代码来直接访问视图，无需使用<code>findViewById</code>。 </p>
<p>要使用View Binding，首先需要在<code>build.gradle.kts</code>中添加如下内容：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json">android <span class="token punctuation">&#123;</span>
    ...
    <span class="token comment">// viewBinding 用于避免编写findViewById</span>
    <span class="token comment">// Android Studio会自动为我们所编写的每一个布局文件都生成一个对应的Binding类。</span>
    <span class="token comment">// Binding类的命名规则是将布局文件按驼峰方式重命名后，再加上Binding作为结尾。</span>
    buildFeatures <span class="token punctuation">&#123;</span>
    	viewBinding = <span class="token boolean">true</span>
	<span class="token punctuation">&#125;</span>
	...
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>然后在代码中使用View Binding代替<code>findViewById</code>。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
    <span class="token comment">// 调用first_layout.xml布局文件对应的Binding类的inflate函数加载该布局</span>
    <span class="token keyword">val</span> binding <span class="token operator">=</span> FirstLayoutBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
    <span class="token comment">// 传入根元素的实例，就可以成功显示first_layout.xml这个布局的内容</span>
    <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

    <span class="token comment">// 为按钮注册点击监听器</span>
    binding<span class="token punctuation">.</span>button1<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 调用 makeText 创建Toast对象，再调用 show 进行展示</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"You clicked Button 1"</span></span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="使用Menu"><a href="#使用Menu" class="headerlink" title="使用Menu"></a>使用Menu</h4><p>首先在res目录下新建一个menu文件夹，右击res目录→New→Directory，输入文件夹名“menu”，点击“OK”。接着在这个文件夹下新建一个名叫“main”的菜单文件，右击menu文件夹→New→Menu resource file。</p>
<p>在main.xml中添加如下代码：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>menu</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/add_item<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Add<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/remove_item<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Remove<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>menu</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>回到FirstActivity中来重写<code>onCreateOptionsMenu()</code>方法，重写方法可以使用<code>Ctrl + O</code>快捷键：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateOptionsMenu</span><span class="token punctuation">(</span>menu<span class="token operator">:</span> Menu<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token punctuation">&#123;</span>
    <span class="token comment">// menuInflater是语法糖，实际调用了父类的getMenuInflater方法，能够得到一个MenuInflater对象</span>
    <span class="token comment">// 调用其inflate方法就可以给当前Activity创建菜单。</span>
    menuInflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>menu<span class="token punctuation">.</span>main<span class="token punctuation">,</span> menu<span class="token punctuation">)</span>
    <span class="token comment">// 允许创建的菜单显示</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// 定义菜单响应事件</span>
<span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onOptionsItemSelected</span><span class="token punctuation">(</span>item<span class="token operator">:</span> MenuItem<span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token punctuation">&#123;</span>
    <span class="token keyword">when</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>itemId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>add_item <span class="token operator">-></span> Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"You clicked Add"</span></span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT
        <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>remove_item <span class="token operator">-></span> Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"You clicked Remove"</span></span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT
        <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">// 消费掉这个点击事件，系统不会进一步传递或处理</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="销毁一个Activity"><a href="#销毁一个Activity" class="headerlink" title="销毁一个Activity"></a>销毁一个Activity</h4><p><strong>只要按一下Back键就可以销毁当前的Activity</strong>。不过，如果你不想通过<br>按键的方式，而是希望在程序中通过代码来销毁Activity，当然也可以，<strong>Activity类提供了一个<code>finish()</code>方法，我们只需要调用一下这个方法就可以销毁当前的Activity</strong>。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token comment">// 为按钮注册点击监听器</span>
binding<span class="token punctuation">.</span>button1<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 点击按钮，当前的Activity就会被销毁</span>
    <span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="使用Intent在Activity之间穿梭"><a href="#使用Intent在Activity之间穿梭" class="headerlink" title="使用Intent在Activity之间穿梭"></a>使用Intent在Activity之间穿梭</h3><p>Intent是Android程序中各组件之间进行交互的一种重要方式，<strong>它不仅可以指明当前组件想要执行的动作，还可以在不同组件之间传递数据</strong>。Intent一般可用于启动Activity、启动Service以及发送广播等场景。</p>
<h4 id="使用显式Intent"><a href="#使用显式Intent" class="headerlink" title="使用显式Intent"></a>使用显式Intent</h4><p>右键选择要创建Activity的包，<code>New</code> - <code>Activity</code> - <code>Empty Views Activity</code>，会弹出一个创建Activity的对话框，不勾选<code>Generate a Layout File</code>，创建<code>SecondActivity</code>。</p>
<p>对着<code>layout</code>目录右键，<code>New</code> -&gt; <code>Layout Resource File</code>，将布局文件命名为<code>second_layout</code>：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@string/button_2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>相应地，重写<code>SecondActivity</code>，应用该布局：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
    <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>second_layout<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>Intent有多个构造函数的重载，其中一个是<code>Intent(Context packageContext, Class&lt;?&gt; cls)</code>：</p>
<ul>
<li>Context要求提供一个启动Activity的上下文。</li>
<li>Class用于指定想要启动的目标Activity</li>
</ul>
<p>Activity类提供了一个<code>startActivity()</code>方法，专门用于启动Activity。</p>
<p>重写FirstActivity中的按钮监听代码：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token comment">// 为按钮注册点击监听器</span>
binding<span class="token punctuation">.</span>button1<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 在当前上下文的基础上，打开SecondActivity</span>
    <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> SecondActivity<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
    <span class="token comment">// 执行该intent</span>
    <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>就能实现在FirstActivity的基础上打开SecondActivity，按一下Back键就可以销毁当前Activity，从而回到上一个Activity</strong>。</p>
<hr>
<h4 id="使用隐式Intent"><a href="#使用隐式Intent" class="headerlink" title="使用隐式Intent"></a>使用隐式Intent</h4><p>相比于显式Intent，隐式Intent则含蓄了许多，它并不明确指出想要启动哪一个Activity，而是<strong>指定一系列更为抽象的action和category等信息，然后交由系统去分析这个Intent</strong>，并帮我们找出合适的Activity去启动。</p>
<p>通过在<code>AndroidManifest.xml</code>中的<code>&lt;activity&gt;</code>标签下配置<code>&lt;intent-filter&gt;</code>内容，可以指定当前Activity能够响应的action和category：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
          <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.SecondActivity<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!-- 当前activity可以响应的action --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.huntr.myapplication.ACTION_START<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token comment">&lt;!-- 附加信息，更精确地指明当前activity能够响应地intent中还可能带有的category --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.category.DEFAULT<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.hunter.myapplication.MY_CATEGORY<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>相应地，修改<code>FirstActivity.kt</code>中的按钮点击事件：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token comment">// 为按钮注册点击监听器</span>
binding<span class="token punctuation">.</span>button1<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 在当前上下文的基础上，打开指定的action能对应的activity</span>
    <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"com.hunter.myapplication.ACTION_START"</span></span><span class="token punctuation">)</span>
    <span class="token comment">// 指定category</span>
    intent<span class="token punctuation">.</span><span class="token function">addCategory</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"com.hunter.myapplication.MY_CATEGORY"</span></span><span class="token punctuation">)</span>
    <span class="token comment">// 执行该intent</span>
    <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="隐式Intent的更多用法"><a href="#隐式Intent的更多用法" class="headerlink" title="隐式Intent的更多用法"></a>隐式Intent的更多用法</h4><p>使用隐式Intent，<strong>不仅可以启动自己程序内的Activity，还可以启动其他程序的Activity，这就使多个应用程序之间的功能共享成为了可能</strong>。</p>
<hr>
<h5 id="调用浏览器"><a href="#调用浏览器" class="headerlink" title="调用浏览器"></a>调用浏览器</h5><p>比如你的应用程序中需要展示一个网页，这时你没有必要自己去实现一个浏览器（事实上也不太可能），只需要调用系统的浏览器来打开这个网页就行了。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token comment">// 为按钮注册点击监听器</span>
binding<span class="token punctuation">.</span>button1<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 在当前上下文的基础上，打开指定的action能对应的activity，ACTION_VIEW是android内置的动作</span>
    <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>ACTION_VIEW<span class="token punctuation">)</span>
    intent<span class="token punctuation">.</span>data <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"https://www.bing.com"</span></span><span class="token punctuation">)</span>
    <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>同时，可以在<code>AndroidManifest.xml</code>中的activity标签下的<code>&lt;intent-filter&gt;</code>标签中配置<code>&lt;data&gt;</code>标签：</p>
<ul>
<li><code>android:scheme</code>：指定数据的协议部分，如https</li>
<li><code>android:host</code>：指定数据的主机名部分，如<code>www.bing.com</code></li>
<li><code>android:port</code>：指定数据的端口部分</li>
<li><code>android:path</code>：指定主机名和端口之后的部分</li>
<li><code>android:mimeType</code>：指定可以处理的数据类型，允许使用通配符的方式进行指定。</li>
</ul>
<p>只有<code>&lt;data&gt;</code>标签中指定的内容和Intent中携带的Data完全一致时，当前Activity才能够响应该Intent。</p>
<hr>
<h5 id="调用拨号界面"><a href="#调用拨号界面" class="headerlink" title="调用拨号界面"></a>调用拨号界面</h5><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token comment">// 为按钮注册点击监听器</span>
binding<span class="token punctuation">.</span>button1<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>ACTION_DIAL<span class="token punctuation">)</span>
    intent<span class="token punctuation">.</span>data <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"tel:10086"</span></span><span class="token punctuation">)</span>
    <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<img src="https://s2.loli.net/2024/10/13/3KYjlr1HqzP6MtV.png" alt="image-20241013210111954" style="zoom: 25%;" />

<hr>
<h4 id="向下一个Activity传递数据"><a href="#向下一个Activity传递数据" class="headerlink" title="向下一个Activity传递数据"></a>向下一个Activity传递数据</h4><p>在启动Activity时传递数据的思路很简单，Intent中提供了一系列<code>putExtra()</code>方法的重载，可以把我们想要传递的数据暂存在Intent中，在启动另一个Activity后，只需要把这些数据从Intent中取出就可以了。</p>
<p>例如在FirstActivity中：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token comment">// 为按钮注册点击监听器</span>
binding<span class="token punctuation">.</span>button1<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">val</span> <span class="token keyword">data</span> <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello SecondActivity"</span></span>
    <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> SecondActivity<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
    <span class="token comment">// 通过putExtra方法传递一个字符串</span>
    intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"extra_data"</span></span><span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span>
    <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在SecondActivity中获取传递的数据：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">val</span> stringExtraData <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"extra_data"</span></span><span class="token punctuation">)</span>
Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"SecondActivity"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"extra data is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">stringExtraData</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<hr>
<h4 id="返回数据给上一个Activity"><a href="#返回数据给上一个Activity" class="headerlink" title="返回数据给上一个Activity"></a>返回数据给上一个Activity</h4><p>返回上一个Activity只需要按一下Back键就可以了，没有一个用于启动Activity的Intent来传递数据。可以通过<code>registerForActivityResult()</code>注册对Activity结果的处理。</p>
<p>在FirstActivity做如下改动：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> FirstActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 定义 ActivityResultLauncher，registerForActivityResult用于处理活动结果的注册</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> resultLauncher <span class="token operator">=</span> <span class="token function">registerForActivityResult</span><span class="token punctuation">(</span>
        <span class="token comment">// 这个 resultLauncher 将用于启动一个新活动并接收其结果</span>
        ActivityResultContracts<span class="token punctuation">.</span><span class="token function">StartActivityForResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> result <span class="token operator">-></span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>resultCode <span class="token operator">==</span> RESULT_OK<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
           <span class="token keyword">val</span> <span class="token keyword">data</span><span class="token operator">:</span> Intent<span class="token operator">?</span> <span class="token operator">=</span> result<span class="token punctuation">.</span>data
           <span class="token comment">// 处理返回的数据，?用于安全地操作可能的空值</span>
           <span class="token keyword">val</span> returnedData <span class="token operator">=</span> <span class="token keyword">data</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"data_return"</span></span><span class="token punctuation">)</span>
           Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"FirstActivity"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"returned data is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">returnedData</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
       <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">..</span><span class="token punctuation">.</span>

        <span class="token comment">// 为按钮注册点击监听器</span>
        binding<span class="token punctuation">.</span>button1<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> SecondActivity<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
            <span class="token comment">// 启动SecondActivity，并等待结果</span>
            resultLauncher<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在SecondActivity中：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> SecondActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token comment">// 调用second_layout.xml布局文件对应的Binding类的inflate函数加载该布局</span>
        <span class="token keyword">val</span> binding <span class="token operator">=</span> SecondLayoutBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
        <span class="token comment">// 传入根元素的实例，就可以成功显示second_layout.xml这个布局的内容</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

        <span class="token comment">// 为 button2 注册点击监听器</span>
        binding<span class="token punctuation">.</span>button2<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
            <span class="token function">returnDataToFirstActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>

        <span class="token comment">// 注册 OnBackPressedCallback 来处理后退按钮事件</span>
        onBackPressedDispatcher<span class="token punctuation">.</span><span class="token function">addCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">object</span> <span class="token operator">:</span> <span class="token function">OnBackPressedCallback</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">handleOnBackPressed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token function">returnDataToFirstActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">returnDataToFirstActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"data_return"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Hello FirstActivity"</span></span><span class="token punctuation">)</span>
        <span class="token comment">// setResult 专门用于向上一个Activity返回数据</span>
        <span class="token function">setResult</span><span class="token punctuation">(</span>RESULT_OK<span class="token punctuation">,</span> intent<span class="token punctuation">)</span>
        <span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="Activity的生命周期"><a href="#Activity的生命周期" class="headerlink" title="Activity的生命周期"></a>Activity的生命周期</h3><h4 id="返回栈"><a href="#返回栈" class="headerlink" title="返回栈"></a>返回栈</h4><p>Android中的Activity是可以层叠的。我们每启动一个新的Activity，就会覆盖在原Activity之上，然后点击Back键会销毁最上面的Activity，下面的一个Activity就会重新显示出来。</p>
<p>Android<strong>使用任务（task）来管理Activity</strong>，一个任务就是<strong>一组存放在栈里的Activity的集合</strong>，这个栈也被称作返回栈（back stack）。</p>
<hr>
<h4 id="Activity状态"><a href="#Activity状态" class="headerlink" title="Activity状态"></a>Activity状态</h4><p>每个Activity在生命周期中，最多可能有4种状态。</p>
<ol>
<li><p>运行状态</p>
</li>
<li><p>暂停状态</p>
<p> 当一个Activity<strong>不再处于栈顶，但仍然可见时（并不是每个Activity都会占满整个屏幕，比如对话框）</strong>，就进入了暂停状态。<strong>只有在内存极低的情况下，系统才会考虑回收这种Activity</strong>。</p>
</li>
<li><p>停止状态</p>
<p> 当一个Activity<strong>不再处于栈顶，并且完全不可见</strong>，就进入了停止状态。其他地方需要内存时，处于停止状态的Activity有可能会被系统回收。</p>
</li>
<li><p>销毁状态</p>
<p> Activity从栈中移除后，就变成了销毁状态。系统最倾向于回收这种状态的Activity，以保证手机的内存充足。</p>
</li>
</ol>
<hr>
<h4 id="Activity的生存期"><a href="#Activity的生存期" class="headerlink" title="Activity的生存期"></a>Activity的生存期</h4><p>Activity类中定义了<strong>7个回调方法</strong>，覆盖了Activity生命周期的每个环节。</p>
<ol>
<li><code>onCreate()</code>：在Activity<strong>被创建的时候调用</strong>。应该在该方法中完成初始化操作，比如<strong>加载布局、绑定事件</strong>等。</li>
<li><code>onStart()</code>：在Activity<strong>由不可见变为可见时调用</strong>。</li>
<li><code>onResume()</code>：在Activity<strong>准备好和用户交互时调用</strong>。此时Activity一定位于返回栈的栈顶，并处于运行状态。</li>
<li><code>onPause()</code>：在系统准备去启动或恢复另一个Activity时调用。通常在这个方法中，将一些消耗CPU的资源放掉、保存一些关键数据。<strong>但执行速度一定要快，避免影响新的栈顶Activity使用</strong>。</li>
<li><code>onStop()</code>：在Activity<strong>完全不可见时</strong>调用。和<code>onPause()</code>方法的主要区别在于，如果启动的新Activity是一个<strong>对话框式的Activity，那么<code>onPause()</code>方法会得到执行，<code>onStop()</code>方法并不会执行</strong>。 </li>
<li><code>onDestroy()</code>：在Activity<strong>被销毁之前调用</strong>，之后Activity的状态变为销毁状态。</li>
<li><code>onRestart()</code>：在Activity<strong>由停止变为运行状态之前调用</strong>。</li>
</ol>
<hr>
<p>上述7个方法，除了<code>onRestart()</code>之外，都是两两相对，从而可以将Activity分为以下3种生存期：</p>
<ul>
<li><strong>完整生存期</strong>。Activity<strong>在<code>onCreate()</code>和<code>onDestroy()</code>方法之间</strong>所经历的就是完整生存期。</li>
<li><strong>可见生存期</strong>。Activity<strong>在<code>onStart()</code>和<code>onStop()</code>之间</strong>所经历的就是可见生存期。在可见生存期内，Activity<strong>对于用户总是可见的，即使可能无法和用户进行交互</strong>。可以通过这两个方法<strong>合理地管理那些对用户可见的资源</strong>。比如<strong>在<code>onStart()</code>方法中对资源进行加载，而在<code>onStop()</code>方法中对资源进行释放，从而保证处于停止状态的Activity不会占用过多内存</strong>。</li>
<li><strong>前台生存期</strong>。Activity<strong>在<code>onResume()</code>方法和<code>onPause()</code>方法之间</strong>所经历的就是前台生存期。在前台生存期内，<strong>Activity总是处于运行状态，此时的Activity是可以和用户进行交互的</strong>。</li>
</ul>
<img src="https://s2.loli.net/2024/10/14/v9y2kpGUVYwHnFZ.png" alt="image-20241014134452549" style="zoom: 67%;" />

<p>新建一个项目<code>ActivityLifeCycleTest</code>为例子，New Project -&gt; <code>Empty Views Activity</code>。</p>
<p><img src="https://s2.loli.net/2024/10/14/GbgDcTqRlWEf1ui.png" alt="image-20241014163751536"></p>
<p>会默认生成<code>MainActivity</code>和<code>activity_main.xml</code>。继续创建两个子Activity：<code>NormalActivity</code>和<code>DialogActivity</code>。同样地，以<code>Empty Views Activity</code>形式创建，不勾选<code>Generate a Layout File</code>。之后在<code>res/layout</code>目录下，手动创建<code>normal_layout.xml</code>和<code>dialog_layout.xml</code>两个布局文件：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token comment">&lt;!-- 显示一行文字 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>This is a normal activity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>This is a dialog activity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>相应地，<code>NormalActivity</code>和<code>DialogActivity</code>中添加对应的布局：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> NormalActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>normal_layout<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> DialogActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>dialog_layout<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>为了将DialogActivity设置成对话框的样式，需要在<code>AndroidManifest.xml</code>中配置<code>&lt;activity&gt;</code>标签：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- android:theme属性用于指定主题 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
          <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.DialogActivity<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@style/Theme.AppCompat.Dialog<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>接着，修改<code>activity_main.xml</code>：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/startNormalActivity<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Start NormalActivity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/startDialogActivity<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Start DialogActivity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>最后，修改<code>MainActivity</code>中的代码：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> tag <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"MainActivity"</span></span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onCreate"</span></span><span class="token punctuation">)</span>
        <span class="token comment">// 调用activity_main.xml布局文件对应的Binding类的inflate函数加载布局</span>
        <span class="token keyword">val</span> binding <span class="token operator">=</span> ActivityMainBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
        <span class="token comment">// 传入根元素的实例，就可以成功显示activity_main.xml这个布局的内容</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

        binding<span class="token punctuation">.</span>startNormalActivity<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> NormalActivity<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
            <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>

        binding<span class="token punctuation">.</span>startDialogActivity<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> DialogActivity<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
            <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onStart"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onResume"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onPause"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onStop"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onDestroy"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onRestart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onRestart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onRestart"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>在Activity的7个回调方法中分别打印了一句话，这样就可以通过观察日志来更直观地理解Activity的生命周期</strong>。</p>
<hr>
<h4 id="Activity被回收了怎么办"><a href="#Activity被回收了怎么办" class="headerlink" title="Activity被回收了怎么办"></a>Activity被回收了怎么办</h4><p><strong>当一个Activity进入了停止状态，是有可能被系统回收的</strong>。那么想象以下场景：应用中有一个Activity A，用户在Activity A的基础上启动了Activity B，Activity A就进入了停止状态，这个时候由于系统内存不足，将Activity A回收掉了，然后用户按下Back键返回Activity A，会出现什么情况呢？其实还是会正常显示Activity A的，只不过<strong>这时并不会执行onRestart()方法，而是会执行Activity A的onCreate()方法，因为Activity A在这种情况下会被重新创建一次</strong>。</p>
<p>但是<strong>Activity A中是可能存在临时数据和状态的</strong>。打个比方，MainActivity中如果有一个文本输入框，现在你输入了一段文字，然后启动NormalActivity，这时MainActivity由于系统内存不足被回收掉，过了一会你又点击了Back键回到MainActivity，你会发现刚刚输入的文字都没了，因为MainActivity被重新创建了。</p>
<p>Activity中还提供了一个<code>onSaveInstanceState()</code>回调方法，这个方法<strong>可以保证在Activity被回收之前一定会被调用</strong>，因此我们可以通过这个方法来解决问题。<code>onSaveInstanceState()</code>方法会携带一个<code>Bundle</code>类型的参数，Bundle提供了一系列的方法用于保存数据，比如可以使用<code>putString()</code>方法保存字符串，使用<code>putInt()</code>方法保存整型数据，以此类推。<strong>每个保存方法需要传入两个参数，第一个参数是键，用于后面从Bundle中取</strong><br><strong>值，第二个参数是真正要保存的内容</strong>。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onSaveInstanceState</span><span class="token punctuation">(</span>outState<span class="token operator">:</span> Bundle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onSaveInstanceState</span><span class="token punctuation">(</span>outState<span class="token punctuation">)</span>
    <span class="token keyword">val</span> tempData <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Something you just typed"</span></span>
    outState<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"data_key"</span></span><span class="token punctuation">,</span> tempData<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>我们一直使用的<code>onCreate()</code>方法其实也有一个Bundle类型的参数。<strong>这个参数在一般情况下都是null</strong>，但是如果在Activity被系统回收之前，通过<code>onSaveInstanceState()</code>方法保存数据，<strong>这个参数就会带有保存的全部数据</strong>，我们只需要再通过相应的取值方法将数据取出即可，比如将文本内容重新赋值到文本输入框上。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>savedInstanceState <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">val</span> tempData <span class="token operator">=</span> savedInstanceState<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"data_key"</span></span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"tempData is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">tempData</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>Intent还可以结合Bundle一起用于传递数据</strong>。首先我们可以把需要传递的数据都保存在Bundle对象中，然后再将Bundle对象存放在Intent里。到了目标Activity之后，先从Intent中取出Bundle，再从Bundle中一一取出数据。</p>
<p>另外，<strong>当手机的屏幕发生旋转的时候，Activity也会经历一个重新创建的过程</strong>，虽然这个问题同样可以通过onSaveInstanceState()方法来解决，但是一般不太建议这么做，因为对于横竖屏旋转的情况，有更加优雅的解决方<br>案，后续介绍。</p>
<hr>
<h3 id="Activity的启动模式"><a href="#Activity的启动模式" class="headerlink" title="Activity的启动模式"></a>Activity的启动模式</h3><p>启动模式一共有4种，分别是standard、singleTop、singleTask和singleInstance，可以在AndroidManifest.xml中通过给<code>&lt;activity&gt;</code>标签指定<code>android:launchMode</code>属性来选择启动模式。</p>
<h4 id="standard"><a href="#standard" class="headerlink" title="standard"></a>standard</h4><p> <strong>standard是Activity默认的启动模式</strong>。在standard模式下，每当启动一个新的Activity，就会在返回栈中入栈，并处于栈顶的位置。系统不在乎Activity是否已经在返回栈中，每次启动都会创建一个Activity的新实例。</p>
<hr>
<h4 id="singleTop"><a href="#singleTop" class="headerlink" title="singleTop"></a>singleTop</h4><p>当Activity的启动模式指定为singleTop，<strong>在启动Activity时如果发现返回栈的栈顶已经是该Activity，则认为可以直接使用它，不会再创建新的Activity实例</strong>。当返回栈的栈顶并不是该Activity时，再次启动该Activity还是会创建新实例。</p>
<hr>
<h4 id="singleTask"><a href="#singleTask" class="headerlink" title="singleTask"></a>singleTask</h4><p>使用singleTop模式，如果Activity没有处于栈顶位置，还是可能创建多个Activity实例。而使用singleTask，每次启用该Activity时，系统首先会在返回栈中检查是否存在该Activity的实例，如果存在则直接使用，并把该Activity之上的所有其他Activity都出栈，如果没有发现就创建新的Activity实例。</p>
<hr>
<h4 id="singleInstance"><a href="#singleInstance" class="headerlink" title="singleInstance"></a>singleInstance</h4><p>不同于以上3种启动模式，指定为singleInstance模式的Activity会<strong>启用一个新的返回栈来管理这个Activity</strong>（其实如果singleTask模式指定了不同的taskAffinity，也会启动一个新的返回栈）。</p>
<p>假设程序中有一个Activity允许其他程序调用，如果想实现其他程序和当前程序共享这个Activity的实例，就可以使用singleInstance模式解决这个问题，不管哪个应用程序来访问这个Activity，都共用一个返回栈，解决了共享Activity实例的问题。</p>
<hr>
<h3 id="Activity的实践技巧"><a href="#Activity的实践技巧" class="headerlink" title="Activity的实践技巧"></a>Activity的实践技巧</h3><h4 id="知晓当前是在哪一个Activity"><a href="#知晓当前是在哪一个Activity" class="headerlink" title="知晓当前是在哪一个Activity"></a>知晓当前是在哪一个Activity</h4><p>创建一个BaseActivity类，由于不需要让BaseActivity在AndroidManifest.xml中注册，所以创建一个普通的Kotlin类即可。然后让BaseActivity继承AppCompatActivity，并重写<code>onCreate()</code>方法：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">open</span> <span class="token keyword">class</span> BaseActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token comment">// javaClass相当于在java中调用getClass()方法，获取实例的class对象，调用simpleName获取当前实例的类名</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"BaseActivity"</span></span><span class="token punctuation">,</span> javaClass<span class="token punctuation">.</span>simpleName<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>再将FirstActivity、SecondActivity和ThirdActivity由继承AppCompatActivity改为继承BaseActivity</strong>。这样，每当进入一个Activity界面时，其类名就会被打印出来，就能知道当前所在的Activity。</p>
<hr>
<h4 id="随时退出程序"><a href="#随时退出程序" class="headerlink" title="随时退出程序"></a>随时退出程序</h4><p>只需要<strong>一个专门的集合对所有的Activity进行管理</strong>。</p>
<p>新建一个单例类ActivityCollector作为Activity的集合：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token comment">/**
 * Object: 单例类
 * 使用单例类是因为全局只需要一个Activity集合
 */</span>
<span class="token keyword">object</span> ActivityCollector <span class="token punctuation">&#123;</span>
    <span class="token comment">// 通过ArrayList暂存Activity</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> activities <span class="token operator">=</span> ArrayList<span class="token operator">&lt;</span>Activity<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">fun</span> <span class="token function">addActivity</span><span class="token punctuation">(</span>activity<span class="token operator">:</span> Activity<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        activities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>activity<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">fun</span> <span class="token function">removeActivity</span><span class="token punctuation">(</span>activity<span class="token operator">:</span> Activity<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        activities<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>activity<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">/**
     * 将ArrayList中存储的Activity全部销毁
     */</span>
    <span class="token keyword">fun</span> <span class="token function">finishAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>activity <span class="token keyword">in</span> activities<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// 是否正在销毁中</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activity<span class="token punctuation">.</span>isFinishing<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                activity<span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        activities<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在BaseActivity的onCreate()方法中调用了ActivityCollector的addActivity()方法，表明将当前正在创建的Activity添加到集合里。然后在BaseActivity中重写onDestroy()方法，并调用了ActivityCollector的removeActivity()方法，表明从集合里移除一个马上要销毁的Activity。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">open</span> <span class="token keyword">class</span> BaseActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token comment">// javaClass相当于在java中调用getClass()方法，获取实例的class对象，调用simpleName获取当前实例的类名</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"BaseActivity"</span></span><span class="token punctuation">,</span> javaClass<span class="token punctuation">.</span>simpleName<span class="token punctuation">)</span>
        ActivityCollector<span class="token punctuation">.</span><span class="token function">addActivity</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        ActivityCollector<span class="token punctuation">.</span><span class="token function">removeActivity</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>不管你想在什么地方退出程序，只需要调用ActivityCollector.finishAll()</strong><br><strong>方法就可以了</strong>。例如在ThirdActivity界面想通过点击按钮直接退出程序，只需将代码改成如下形式：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> ThirdActivity <span class="token operator">:</span> <span class="token function">BaseActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"ThirdActivity"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Task id is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">taskId</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token comment">// 调用third_layout.xml布局文件对应的Binding类的inflate函数加载该布局</span>
        <span class="token keyword">val</span> binding <span class="token operator">=</span>  ThirdLayoutBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
        <span class="token comment">// 传入根元素的实例，就可以成功显示third_layout.xml这个布局的内容</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

        binding<span class="token punctuation">.</span>button3<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
            ActivityCollector<span class="token punctuation">.</span><span class="token function">finishAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">// 杀掉当前进程，以保证程序完全退出，killProcess只能用于杀掉当前程序的进程，不能杀掉其他程序</span>
            android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Process<span class="token punctuation">.</span><span class="token function">killProcess</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Process<span class="token punctuation">.</span><span class="token function">myPid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="启动Activity的最佳写法"><a href="#启动Activity的最佳写法" class="headerlink" title="启动Activity的最佳写法"></a>启动Activity的最佳写法</h4><p>启动Activity的方法相信你已经非常熟悉了，首先通过Intent构建出当前的“意图”，然后调用<code>startActivity()</code>或<code>startActivityForResult()</code>方法将Activity启动起来，如果有数据需要在Activity之间传递，也可以借助Intent来完成。</p>
<p>假设SecondActivity中需要用到两个非常重要的字符串参数，在启动SecondActivity的时候必须传递过来，那么我们很容易会写出如下代码：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> SecondActivity<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"param1"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"data1"</span></span><span class="token punctuation">)</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"param2"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"data2"</span></span><span class="token punctuation">)</span>
<span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>虽然这样写是完全正确的，但是在真正的项目开发中经常会出现对接的问题。比如SecondActivity并不是由你开发的，但现在你负责开发的部分需要启动SecondActivity，而你却不清楚启动SecondActivity需要传递哪些数据。这时无非就有两个办法：一个是你自己去阅读SecondActivity中的代码，另一个是询问负责编写SecondActivity的同事。你会不会觉得很麻烦呢？其实只需要换一种写法，就可以轻松解决上面的窘境。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> SecondActivity <span class="token operator">:</span> <span class="token function">BaseActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">fun</span> <span class="token function">actionStart</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">,</span> data1<span class="token operator">:</span> String<span class="token punctuation">,</span> data2<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> SecondActivity<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">&#123;</span>
                <span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"param1"</span></span><span class="token punctuation">,</span> data1<span class="token punctuation">)</span>
                <span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"param2"</span></span><span class="token punctuation">,</span> data2<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
            context<span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这样写，可以非常清晰地知道启动SecondActivity需要传递哪些数据。同时，还能简化启动Activity的代码：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin">button1<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
    SecondActivity<span class="token punctuation">.</span><span class="token function">actionStart</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"data1"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"data2"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<hr>
<h2 id="UI开发"><a href="#UI开发" class="headerlink" title="UI开发"></a>UI开发</h2><h3 id="常用控件的使用"><a href="#常用控件的使用" class="headerlink" title="常用控件的使用"></a>常用控件的使用</h3><p>创建一个名为<code>UIWidgetTest</code>的Empty Views Activity项目。</p>
<h4 id="TextView"><a href="#TextView" class="headerlink" title="TextView"></a>TextView</h4><p>TextView用于在界面显示文本信息。修改默认创建的<code>activity_main.xml</code>：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
              <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/textView<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#00ff00<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>24sp<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>This is TextView<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>android:gravity</code>：TextView中的<strong>文字默认居左上角对齐</strong>，通过<code>android:gravity</code>显式指定对齐方式：top、bottom、start、end、center等。<strong>可以用“|”来同时指定多个值</strong>，这里我们指定的是”center”，效果等同于”center_vertical|center_horizontal”，表示文字在垂直和水平方向都居中对齐。</li>
<li><code>android:textColor=&quot;#00ff00&quot;</code>：指定文字颜色</li>
<li><code>android:textSize=&quot;24sp&quot;</code>：指定文字大小，<strong>要使用sp作为单位</strong>（这样，当用户在系统中修改了文字显式尺寸时，应用程序中的文字大小才会跟着变化）</li>
</ul>
<hr>
<h4 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Android系统<strong>默认会将按钮上的英文字母全部转换成大写</strong>。可以在XML中添加<code>android:textAllCaps=&quot;false&quot;</code>这个属性，这样系统就会<strong>保留原始文字内容</strong>。</p>
<p>接着可以为Button的点击事件注册一个监听器：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>

    <span class="token keyword">val</span> binding <span class="token operator">=</span> ActivityMainBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
    <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

    binding<span class="token punctuation">.</span>button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// 添加逻辑</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这里调用button的<code>setOnClickListener()</code>方法时利用了Java单抽象方法接口的特性，从而可以使用函数式API的写法来监听按钮的点击事件。这样每当点击按钮时，就会<strong>执行Lambda表达式中的代码，只需要在Lambda表达式中添加待实现的逻辑</strong>。</p>
<p>除了使用函数式API的方式来注册监听器，也可以<strong>使用接口的方式注册监听器</strong>：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> View<span class="token punctuation">.</span><span class="token function">OnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>

        <span class="token keyword">val</span> binding <span class="token operator">=</span> ActivityMainBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

        binding<span class="token punctuation">.</span>button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onClick</span><span class="token punctuation">(</span>v<span class="token operator">:</span> View<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>v<span class="token operator">?</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
                <span class="token comment">// 添加逻辑</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>让MainActivity实现<code>View.OnClickListener</code>接口，并重写了<code>onClick()</code>方法，然后<strong>在调用button的setOnClickListener()方法时将MainActivity的实例传进去</strong>。这样每当点击按钮时，就会执行onClick()方法中的代码了。</p>
<hr>
<h4 id="EditText"><a href="#EditText" class="headerlink" title="EditText"></a>EditText</h4><p>EditText是程序用于和用户进行交互的另一个重要控件，它允许用户在控件里输入和编辑内容，并可以在程序中对这些内容进行处理。</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>
          <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/editText<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Type something here<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>maxLines</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>android:hint</code>属性用于设定提示性的文本。当我们输入任何内容时，这段文本就会自动消失。</li>
</ul>
<p>随着输入的内容不断增多，<strong>EditText会被不断地拉长</strong>。这是由于EditText的高度指定的是wrap_content，因此它总能包含住里面的内容，<strong>但是当输入的内容过多时，界面就会变得非常难看</strong>。可以使用<code>android:maxLines</code>属性来解决这个问题。这里通过android:maxLines指定了EditText的最大行数为两行，这样<strong>当输入的内容超过2行时，文本就会向上滚动，EditText则不会再继续拉伸</strong>。</p>
<p>还可以结合使用EditText与Button来完成一些功能，比如通过点击按钮获取EditText中输入的内容：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> View<span class="token punctuation">.</span><span class="token function">OnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> binding<span class="token operator">:</span> ActivityMainBinding

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        binding <span class="token operator">=</span> ActivityMainBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

        binding<span class="token punctuation">.</span>button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onClick</span><span class="token punctuation">(</span>v<span class="token operator">:</span> View<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>v<span class="token operator">?</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">val</span> inputText <span class="token operator">=</span> binding<span class="token punctuation">.</span>editText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> inputText<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h4><p>ImageView是用于在界面上展示图片的一个控件，它可以让程序界面更丰富多彩。</p>
<p>图片通常<strong>放在以drawable开头的目录下，并且要带上具体的分辨率</strong>。现在最主流的手机屏幕分辨率大多是xxhdpi的，所以我们在res目录下再新建一个<code>drawable-xxhdpi</code>目录：右键 -&gt; New -&gt; Android Resource Directory。</p>
<p><img src="https://s2.loli.net/2024/10/15/ynPcskNGg2FAWCY.png" alt="image-20241015225933054"></p>
<p>再准备好两张图片，放入该目录下，注意图片的命名要符合Android规范：<strong>只能包含小写字母、数字、下划线和点号，并且不能以数字开头</strong>。</p>
<p>如果放入图片后，该图片被Android Studio标红，尝试重启Android Studio： <code>File -&gt; Invalidate Caches / Restart</code>，然后选择 <code>Invalidate and Restart</code>。之后，就能通过<code>&lt;ImageView&gt;</code>标签往应用中插入图片。</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageView</span>
           <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/imageView<span class="token punctuation">"</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/cy1a9741<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>还可以在程序中<strong>通过代码动态地更改ImageView中的图片</strong>：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> View<span class="token punctuation">.</span><span class="token function">OnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> binding<span class="token operator">:</span> ActivityMainBinding

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        binding <span class="token operator">=</span> ActivityMainBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

        binding<span class="token punctuation">.</span>button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onClick</span><span class="token punctuation">(</span>v<span class="token operator">:</span> View<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>v<span class="token operator">?</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token operator">..</span><span class="token punctuation">.</span>
                binding<span class="token punctuation">.</span>imageView<span class="token punctuation">.</span><span class="token function">setImageResource</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>cy1a9740<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="ProgressBar"><a href="#ProgressBar" class="headerlink" title="ProgressBar"></a>ProgressBar</h4><p>ProgressBar用于在界面上显示一个进度条，表示我们的程序正在加载一些数据。</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ProgressBar</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/progressBar<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>如何才能<strong>让进度条在数据加载完成时消失</strong>呢？所有的Android控件都具有可见属性，可以通过<code>android:visibility</code>进行指定，可选值有3种：visible、invisible和gone。</p>
<ul>
<li>visible表示控件是可见的，这个值是默认值，不指定android:visibility时，控件都是可见的。</li>
<li>invisible表示控件不可见，但是它仍然占据着原来的位置和大小，可以理解成控件变成透明状态了。</li>
<li>gone则表示控件不仅不可见，而且不再占用任何屏幕空间。</li>
</ul>
<p>也可以通过代码来设置控件的可见性，<code>setVisibility()</code>方法，允许传入<code>View.VISIBLE</code>、<code>View.INVISIBLE</code>和<code>View.GONE</code>这三种值。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> View<span class="token punctuation">.</span><span class="token function">OnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> binding<span class="token operator">:</span> ActivityMainBinding

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        binding <span class="token operator">=</span> ActivityMainBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

        binding<span class="token punctuation">.</span>button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onClick</span><span class="token punctuation">(</span>v<span class="token operator">:</span> View<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>v<span class="token operator">?</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
                <span class="token comment">// 点击让进度条消失，再点击让进度条出现</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>binding<span class="token punctuation">.</span>progressBar<span class="token punctuation">.</span>visibility <span class="token operator">==</span> View<span class="token punctuation">.</span>VISIBLE<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    binding<span class="token punctuation">.</span>progressBar<span class="token punctuation">.</span>visibility <span class="token operator">=</span> View<span class="token punctuation">.</span>GONE
                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                    binding<span class="token punctuation">.</span>progressBar<span class="token punctuation">.</span>visibility <span class="token operator">=</span> View<span class="token punctuation">.</span>VISIBLE
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>还可以通过<code>style</code>指定不同的进度条样式、通过<code>android:max</code>设置进度条的最大值：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ProgressBar</span>
             <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/progressBar<span class="token punctuation">"</span></span>
             <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css">?<span class="token property">android</span><span class="token punctuation">:</span>attr/progressBarStyleHorizontal</span><span class="token punctuation">"</span></span></span>
             <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
             <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
             <span class="token attr-name"><span class="token namespace">android:</span>max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在代码中可以动态地更改进度条的进度：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> View<span class="token punctuation">.</span><span class="token function">OnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> binding<span class="token operator">:</span> ActivityMainBinding

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        binding <span class="token operator">=</span> ActivityMainBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

        binding<span class="token punctuation">.</span>button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onClick</span><span class="token punctuation">(</span>v<span class="token operator">:</span> View<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>v<span class="token operator">?</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
                <span class="token comment">// 在当前进度上加10</span>
                binding<span class="token punctuation">.</span>progressBar<span class="token punctuation">.</span>progress <span class="token operator">+=</span> <span class="token number">10</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="AlertDialog"><a href="#AlertDialog" class="headerlink" title="AlertDialog"></a>AlertDialog</h4><p>AlertDialog可以在当前界面弹出一个对话框，这个对话框<strong>置顶于所有界面元素之上，能够屏蔽其他控件的交互能力，因此AlertDialog一般用于提示一些非常重要的内容或者警告信息</strong>。</p>
<p>比如为了防止用户误删重要内容，在删除前弹出一个确认对话框：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> View<span class="token punctuation">.</span><span class="token function">OnClickListener</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> binding<span class="token operator">:</span> ActivityMainBinding

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        binding <span class="token operator">=</span> ActivityMainBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

        binding<span class="token punctuation">.</span>button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onClick</span><span class="token punctuation">(</span>v<span class="token operator">:</span> View<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>v<span class="token operator">?</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
                <span class="token comment">// 构建对话框</span>
                AlertDialog<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">&#123;</span>
                    <span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"This is Dialog"</span></span><span class="token punctuation">)</span> <span class="token comment">// 设置标题</span>
                    <span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Something important."</span></span><span class="token punctuation">)</span> <span class="token comment">// 设置内容</span>
                    <span class="token function">setCancelable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// 能否使用Back键关闭对话框</span>
                    <span class="token comment">// 设置确定按钮的点击事件</span>
                    <span class="token function">setPositiveButton</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"OK"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> _<span class="token punctuation">,</span> _ <span class="token operator">-></span> <span class="token comment">// 目前没有具体的处理逻辑</span>
                                            <span class="token punctuation">&#125;</span>
                    <span class="token comment">// 设置取消按钮的点击事件</span>
                    <span class="token function">setNegativeButton</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Cancel"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> _<span class="token punctuation">,</span> _ <span class="token operator">-></span>
                                                <span class="token punctuation">&#125;</span>
                    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 显示对话框</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="基本布局"><a href="#基本布局" class="headerlink" title="基本布局"></a>基本布局</h3><p>一个丰富的界面是由很多个控件组成的，借助布局能让各个控件都有条不紊地摆放在界面上。<strong>布局是一种可用于放置很多控件的容器，它可以按照一定的规律调整内部控件的位置，从而编写出精美的界面</strong>。当然，布局的内部除了放置控件外，也可以放置布局，通过多层布局的嵌套，就能完成一些比较复杂的界面实现。</p>
<img src="https://s2.loli.net/2024/10/16/KU4iCTbdWgSVeka.png" alt="image-20241016165219944" style="zoom:67%;" />

<p>新建一个Empty Views Activity的UILayoutTest项目，并让Android Studio自动帮我们创建好Activity，Activity名和布局名都使用默认值。</p>
<hr>
<h4 id="LinearLayout"><a href="#LinearLayout" class="headerlink" title="LinearLayout"></a>LinearLayout</h4><p>LinearLayout，线性布局，这个布局会<strong>将它所包含的控件在线性方向上依次排列</strong>。通过<code>android:orientation</code>属性指定排列方向为<code>vertical</code>则垂直排列，指定的是<code>horizontal</code>，控件就在水平方向上排列。</p>
<ul>
<li><p><code>android:layout_gravity</code>：指定<strong>控件在布局中的对齐方式</strong>。当LinearLayout的排列方向是horizontal时，只有垂直方向上的对齐方式才会生效。因为此时水平方向上的长度不固定，每添加一个控件，水平方向上的长度都会改变，因此无法指定该方向上的对齐方式，vertical时同理。</p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>horizontal<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button1<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center_vertical<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button3<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 3<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

  <img src="https://s2.loli.net/2024/10/16/cflQUmTFhkprDgZ.png" alt="image-20241016172001737" style="zoom: 25%;" />
</li>
<li><p><code>android:layout_weight</code>：允许<strong>使用比例的方式指定控件大小</strong>，在手机屏幕的适配性方面可以起到非常重要的作用。</p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>horizontal<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>
              <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/input_message<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Type something<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/send<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Send<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>  由于使用了<code>android:layout_weight</code>属性，此时控件的宽度<br>  不再由<code>android:layout_width</code>来决定，<strong>指定成<code>0 dp</code>是一种比较规范的写法</strong>。在EditText和Button里将android:layout_weight属性的值<strong>都指定为1，表示EditText和Button将在水平方向平分宽度</strong>（系统会先把LinearLayout下<strong>所有控件指定的layout_weight值相加，得到一个总值</strong>，然后每个控件所占大小的比例就是用该控件的layout_weight值除以刚才算出的总值）。</p>
<p>  还可以通过<strong>指定部分控件的layout_weight值</strong>来实现更好的效果：</p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>
          <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/input_message<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Type something<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/send<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Send<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>  仅指定了EditText的android:layout_weight属性，并将Button的宽度改回了wrap_content。这表示<strong>Button的宽度仍然按照wrap_content来计算，而EditText则会占满屏幕所有的剩余空间。使用这种方式编写的界面，不仅可以适配各种屏幕，而且看起来也更加舒服</strong>。</p>
</li>
</ul>
<hr>
<h4 id="RelativeLayout"><a href="#RelativeLayout" class="headerlink" title="RelativeLayout"></a>RelativeLayout</h4><p>RelativeLayout，相对布局，它可以<strong>通过相对定位的方式让控件出现在布局的任何位置</strong>。也正因为如此，RelativeLayout中的属性非常多。</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button1<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentStart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentEnd</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button3<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_centerInParent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 3<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button4<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentStart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 4<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button5<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentEnd</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 5<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>效果如下：</p>
<img src="C:\Users\Hunter\AppData\Roaming\Typora\typora-user-images\image-20241016223814163.png" alt="image-20241016223814163" style="zoom: 25%;" />

<p>上面例子中的每个控件都是<strong>相对于父布局进行定位</strong>，如果要<strong>相对于控件进行定位</strong>，则如下所示：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button3<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_centerInParent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 3<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button1<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_above</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/button3<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/button3<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_above</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/button3<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/button3<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>



    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button4<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/button3<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/button3<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 4<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button5<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/button3<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/button3<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button 5<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>android:layout_above</code>属性可以<strong>让一个控件位于另一个控件的上方</strong>，需要为这个属性指定相对控件id的引用，其他属性也是相似。<strong>当一个控件去引用另一个控件的id时，该控件一定要定义在被引用控件的后面，不然会出现找不到id的情况</strong>。</p>
<p>效果如下：</p>
<img src="C:\Users\Hunter\AppData\Roaming\Typora\typora-user-images\image-20241016224713577.png" alt="image-20241016224713577" style="zoom:33%;" />

<p>RelativeLayout中还有另外一组相对于控件进行定位的属性，<code>android:layout_alignStart</code>表示让一个控件的左边缘和另一个控件的左边缘对齐，<code>android:layout_alignEnd</code>表示让一个控件的右边缘和另一个控件的右边缘对齐。此外，还有<code>android:layout_alignTop</code>和<code>android:layout_alignBottom</code>，道理都是一样的。</p>
<hr>
<h4 id="FrameLayout"><a href="#FrameLayout" class="headerlink" title="FrameLayout"></a>FrameLayout</h4><p>FrameLayout，帧布局，它相比于前面两种布局简单很多，因此它的应用场景少了很多。<strong>这种布局没有丰富的定位方式，所有的控件都会默认摆放在布局的左上角</strong>。</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FrameLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
             <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
             <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
              <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/textView<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>This is TextView<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FrameLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://s2.loli.net/2024/10/16/nkjSplyxhY8qgOW.png" alt="image-20241016225647004"></p>
<p>可以看到，文字和按钮都位于布局的左上角。由于Button是在TextView之后添加的，因此按钮压在了文字的上面。除了这种默认效果之外，<strong>还可以使用<code>layout_gravity</code>属性来指定控件在布局中的对齐方式</strong>，这和LinearLayout中的用法是相似的。</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FrameLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
             <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
             <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
              <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/textView<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>start<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>This is TextView<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>end<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FrameLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>TextView在FrameLayout中居左对齐，Button在FrameLayout中居右对齐：</p>
<img src="https://s2.loli.net/2024/10/16/gDGIu9BlZFjvXer.png" alt="image-20241016230650265" style="zoom:33%;" />

<p>总体来讲，由于定位方式的欠缺，FrameLayout的应用场景相对偏少一些。</p>
<hr>
<h3 id="自定义控件"><a href="#自定义控件" class="headerlink" title="自定义控件"></a>自定义控件</h3><p>常用控件和布局的继承结构：</p>
<img src="https://s2.loli.net/2024/10/16/DNOReZrHQFbCunB.png" alt="image-20241016230815706" style="zoom:80%;" />

<p>可以看到，<strong>所有控件都是直接或间接继承自View</strong>，<strong>所有布局都是直接或间接继承自ViewGroup</strong>。<strong>View是Android中最基本的一种UI组件，它可以在屏幕上绘制一块矩形区域，并能响应这块区域的各种事件</strong>。因此，我们使用的各种控件其实就是在View的基础上又添加了各自特有的功能。而<strong>ViewGroup则是一种特殊的View，它可以包含很多子View和子ViewGroup，是一个用于放置控件和布局的容器</strong>。</p>
<p>当系统自带的控件并不能满足我们的需求时，可以利用上面的继承结构来创建自定义控件。新创建一个Empty Views Activity的UICustomViews项目。</p>
<hr>
<h4 id="引入布局"><a href="#引入布局" class="headerlink" title="引入布局"></a>引入布局</h4><p>创建一个包含左右两个按钮用于返回、编辑操作的标题栏布局。一般我们的程序中可能<strong>有很多个Activity需要这样的标题栏</strong>，如果在每个Activity的布局中都编写一遍同样的标题栏代码，会导致代码冗余。可以通过<strong>引入布局</strong>的方式提取共同代码。</p>
<p>先去<code>src/main/res/values/themes.xml</code>，将默认的主题<code>Theme.Material3.DayNight.NoActionBar</code>改为<code>Theme.AppCompat.Light.NoActionBar</code>，否则后续的布局会有部分内容被主题的配置所覆盖：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- Base application theme. --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Base.Theme.UICustomViews<span class="token punctuation">"</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Theme.AppCompat.Light.NoActionBar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
        &lt;!-- Customize your light theme here. -->
        &lt;!-- &lt;item name=<span class="token string">"colorPrimary"</span>>@color/my_light_primary&lt;/item> -->
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Theme.UICustomViews<span class="token punctuation">"</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Base.Theme.UICustomViews<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在res目录下，新建一个<code>drawable-xxhdpi</code>目录，将<code>title_bg.png</code>、<code>back_bg.png</code>和<code>edit_bg.png</code>（资源下载地址见<br>前言）（<a target="_blank" rel="noopener" href="https://www.ituring.com.cn/book/2744">第一行代码——Android（第3版） (ituring.com.cn)</a>界面的随书下载中的随书资源.zip下载后，就能得到相应的资源）放入，<strong>分别用于作为标题栏、返回按钮和编辑按钮的背景</strong>。</p>
<p>在layout目录下，新建一个<code>title.xml</code>布局：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/title_bg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/titleBack<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/back_bg<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Back<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
              <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/titleText<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Title Text<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>24sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/titleEdit<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/edit_bg<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Edit<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>android:layout_margin</code>这个属性，它可以指定控件在上下左右方向上的间距。当然也可以使用<code>android:layout_marginStart</code>或<code>android:layout_marginTop</code>等属性来单独指定控件在某个方向上的间距。</p>
<p>然后，通过在<code>activity_main.xml</code>中<strong>使用<code>&lt;include&gt;</code>标签引入布局</strong>，就能使用上该标题栏：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@layout/title<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="创建自定义控件"><a href="#创建自定义控件" class="headerlink" title="创建自定义控件"></a>创建自定义控件</h4><p>如果布局中有一些控件要求能够响应事件，还是需要在每个Activity中为这些控件单独编写一次事件注册的代码。<strong>比如标题栏中的返回按钮，其实不管是在哪一个Activity中，这个按钮的功能都是相同的，即销毁当前Activity</strong>。而如果在每一个Activity中都需要重新注册一遍返回按钮的点击事件，也会导致代码冗余，这种情况最好是使用自定义控件的方式来解决。</p>
<p>创建TitileLayout继承LinearLayout，成为自定义的标题栏控件。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">TitleLayout</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">,</span> attrs<span class="token operator">:</span> AttributeSet<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">LinearLayout</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">init</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">/**
         * 对标题栏布局进行动态加载。from方法能构建一个LayoutInflater对象，
         * 然后调用inflate方法可以动态加载一个布局文件，第二个参数是给加载的布局文件添加一个父布局
         */</span>
        <span class="token keyword">val</span> binding <span class="token operator">=</span> TitleBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>LayoutInflater<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        binding<span class="token punctuation">.</span>titleBack<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// TitleLayout中接收的context参数实际上是一个Activity的实例</span>
            <span class="token comment">// Kotlin中的类型强制转换使用的关键字是as</span>
            <span class="token keyword">val</span> activity <span class="token operator">=</span> context <span class="token keyword">as</span> Activity
            activity<span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        binding<span class="token punctuation">.</span>titleEdit<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">&#123;</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"You clicked Edit button"</span></span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在TitleLayout的主构造函数中声明了<code>Context</code>和<code>AttributeSet</code>这两个参数，在布局中引入<code>TitleLayout</code>控件时就会调用这个构造函数。然后在init结构体中需要对标题栏布局进行动态加载，这就要借助<code>LayoutInflater</code>来实现。</p>
<p>现在自定义控件已经创建好了，接下来我们需要在布局文件中添加这个自定义控件，修改<code>activity_main.xml</code>中的代码：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token comment">&lt;!-- 添加自定义控件 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.hunter.uicustomviews.TitleLayout</span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>重新运行程序，你会发现此时的效果和使用引入布局方式的效果是一样的。</p>
<hr>
<h3 id="最常用且最难用的控件：ListView"><a href="#最常用且最难用的控件：ListView" class="headerlink" title="最常用且最难用的控件：ListView"></a>最常用且最难用的控件：ListView</h3><p>由于手机屏幕空间比较有限，能够一次性在屏幕上显示的内容并不多，<strong>当程序中有大量的数据需要展示的时候，就可以借助ListView来实现</strong>。ListView允许用户通过手指上下滑动的方式<strong>将屏幕外的数据滚动到屏幕内，同时屏幕上原有的数据会滚动出屏幕</strong>。</p>
<hr>
<h4 id="ListView的简单用法"><a href="#ListView的简单用法" class="headerlink" title="ListView的简单用法"></a>ListView的简单用法</h4><p>新建一个名为ListViewTest的Empty Views Activity项目，修改activity_main.xml，添加ListView控件：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ListView</span>
              <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/listView<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
              <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>再修改MainActivity：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> <span class="token keyword">data</span> <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span>
        <span class="token string-literal singleline"><span class="token string">"Apple"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Banana"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Orange"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Watermelon"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Pear"</span></span><span class="token punctuation">,</span>
        <span class="token string-literal singleline"><span class="token string">"Grape"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Pineapple"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Strawberry"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Cherry"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Mango"</span></span><span class="token punctuation">,</span>
        <span class="token string-literal singleline"><span class="token string">"Apple"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Banana"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Orange"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Watermelon"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Pear"</span></span><span class="token punctuation">,</span>
        <span class="token string-literal singleline"><span class="token string">"Grape"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Pineapple"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Strawberry"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Cherry"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Mango"</span></span>
    <span class="token punctuation">)</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token keyword">val</span> binding <span class="token operator">=</span> ActivityMainBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>
        <span class="token comment">// ArrayAdapter 将集合数据通过适配器传递给ListView</span>
        <span class="token comment">// 将simple_list_item_1作为ListView子项布局的id，这是一个内置的布局文件，里面只有一个TextView，可以简单地显示一段文本</span>
        <span class="token keyword">val</span> adapter <span class="token operator">=</span> <span class="token function">ArrayAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> android<span class="token punctuation">.</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>simple_list_item_1<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span>
        binding<span class="token punctuation">.</span>listView<span class="token punctuation">.</span>adapter <span class="token operator">=</span> adapter
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>即可通过滚动的方式查看屏幕外的数据。</p>
<hr>
<h4 id="定制ListView界面"><a href="#定制ListView界面" class="headerlink" title="定制ListView界面"></a>定制ListView界面</h4><hr>
<h2 id="Jetpack-Compose"><a href="#Jetpack-Compose" class="headerlink" title="Jetpack Compose"></a>Jetpack Compose</h2><p>Jetpack Compose 是一种<strong>声明式 UI 工具包</strong>，与传统的基于 XML 的布局系统不同，它允许开发者<strong>使用 Kotlin 代码直接构建 UI</strong>。</p>
<hr>
<h3 id="Android-UI-Toolkit"><a href="#Android-UI-Toolkit" class="headerlink" title="Android UI Toolkit"></a>Android UI Toolkit</h3><p>在代码中，<strong>布局由<code>ViewGroup</code>对象表示</strong>，它是<strong>控制子节点在屏幕上的位置和行为</strong>的容器。<strong>小部件由<code>View</code>对象表示</strong>，它显示<strong>单个UI组件</strong>，比如<strong>按钮和文本框</strong>。</p>
<img src="https://s2.loli.net/2024/08/22/UeRpVZxiWrNSgt9.png" alt="image-20240822214736405" style="zoom:80%;" />

<p><code>View</code> 表示 UI 组件的基本构建块。它在屏幕上占据一个矩形区域，在其中绘制特定的 UI 组件，如按钮或文本字段。<strong><code>View</code>也支持交互和事件</strong>。<strong>专用视图通常会公开一组用于管理交互式事件的特定事件监听器</strong>。</p>
<hr>
<h3 id="Composable-函数"><a href="#Composable-函数" class="headerlink" title="Composable 函数"></a>Composable 函数</h3><p>使用XML构建UI的问题：</p>
<ol>
<li>UI不具备可扩展性</li>
<li>难以创建自定义视图</li>
<li>状态的所有权通常分散在多个所有者之间。</li>
</ol>
<p>所有这些问题的根本原因在于 Android View 构建其状态和绘制自身及其子类的方式。为了避免这些问题，你需要重新开始，使用不同的基本构建块。在 Jetpack Compose 中，这个构建块被称为<strong>composable 函数</strong>。</p>
<p><strong>具有<code>@Composable</code>注解的函数</strong>，几乎就是创建新的小部件所需的全部内容。在Compose的世界里，这些小部件称为<code>Composables</code>。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">,</span> modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 渲染一个文本视图</span>
    <span class="token function">Text</span><span class="token punctuation">(</span>
        text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">!"</span></span><span class="token punctuation">,</span>
        <span class="token comment">// modifier 参数是可选的，用于自定义视图的外观和行为。</span>
        modifier <span class="token operator">=</span> modifier
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>注解类通过向代码附加元数据来简化代码。通过使用注解，可以向类添加行为，并生成有用的代码，无需编写大量样板文件。</p>
<p>在Compose中，调用在屏幕上显示某些内容的函数称为发出UI。要发出消息，就需要调用<code>Text</code>函数。<code>Text</code>也是一个Composable函数，它是构成 Jetpack Compose 的<strong>默认Composable函数之一</strong>。需要注意的一点是，<strong>Composable函数只能从其他Composable函数中调用</strong>——如果你尝试删除@Composable，你会收到一个错误，阻止你使用 <code>Text()</code>。</p>
<p><img src="https://s2.loli.net/2024/08/22/kOVt4mjaJrqcTQ3.png" alt="image-20240822222312278"></p>
<p><code>Composable</code>注解类有三个自己的注解：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@MustBeDocumented</span>
<span class="token annotation builtin">@Retention</span><span class="token punctuation">(</span>AnnotationRetention<span class="token punctuation">.</span>BINARY<span class="token punctuation">)</span>
<span class="token annotation builtin">@Target</span><span class="token punctuation">(</span>
    AnnotationTarget<span class="token punctuation">.</span>FUNCTION<span class="token punctuation">,</span>
    AnnotationTarget<span class="token punctuation">.</span>TYPE<span class="token punctuation">,</span>
    AnnotationTarget<span class="token punctuation">.</span>TYPE_PARAMETER<span class="token punctuation">,</span>
    AnnotationTarget<span class="token punctuation">.</span>PROPERTY_GETTER
<span class="token punctuation">)</span>
<span class="token keyword">annotation</span> <span class="token keyword">class</span> Composable<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>@MustBeDocumented</code>：表示注解是公共API的一部分，应该包含在生成的文档中。</li>
<li><code>Retention</code>：告诉编译器注解应该存在多长事件。使用<code>AnnotationRetention.BINARY</code>，处理器将在编译过程中，将代码存储在二进制文件中。</li>
<li><code>@Target</code>：描述应用类型的上下文。<code>@Composable</code>可以应用于类型、参数、函数和属性。</li>
</ul>
<hr>
<h3 id="显示Composables"><a href="#显示Composables" class="headerlink" title="显示Composables"></a>显示Composables</h3><p>可以使用Activity或Fragment作为起点。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        setContent <span class="token punctuation">&#123;</span>
            <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"World"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Text</span><span class="token punctuation">(</span>
        text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">!"</span></span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>可以使用**<code>content</code>块**将<code>composable</code>和<code>activity</code>连接。无需使用XML文件定义布局内容，只需要调用<code>composable</code>函数即可。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">public</span> <span class="token keyword">fun</span> ComponentActivity<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>
    parent<span class="token operator">:</span> CompositionContext<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit
<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>可以看到，<code>setContent()</code>是<code>ComponentActivity</code>的<strong>扩展函数</strong>。<strong>扩展函数能在不更改源代码的情况下向类添加其他功能</strong>。这意味着可以在任何<code>ComponentActivity</code>及其子类上使用<code>setContent()</code>。</p>
<p>调用<code>setContent()</code>会将名为<code>content</code>的composable 函数<strong>设置为根视图</strong>，可以<strong>看作一个容器</strong>，可以在其中添加任意数量的元素，在此容器内调用其余的composable函数。</p>
<hr>
<h3 id="基本的Composable函数"><a href="#基本的Composable函数" class="headerlink" title="基本的Composable函数"></a>基本的Composable函数</h3><h4 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h4><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">package</span> androidx<span class="token punctuation">.</span>compose<span class="token punctuation">.</span>material

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">Text</span><span class="token punctuation">(</span>
    text<span class="token operator">:</span> String<span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    color<span class="token operator">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">.</span>Unspecified<span class="token punctuation">,</span>
    fontSize<span class="token operator">:</span> TextUnit <span class="token operator">=</span> TextUnit<span class="token punctuation">.</span>Unspecified<span class="token punctuation">,</span>
    fontStyle<span class="token operator">:</span> FontStyle<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    fontWeight<span class="token operator">:</span> FontWeight<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    fontFamily<span class="token operator">:</span> FontFamily<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    letterSpacing<span class="token operator">:</span> TextUnit <span class="token operator">=</span> TextUnit<span class="token punctuation">.</span>Unspecified<span class="token punctuation">,</span>
    textDecoration<span class="token operator">:</span> TextDecoration<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    textAlign<span class="token operator">:</span> TextAlign<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    lineHeight<span class="token operator">:</span> TextUnit <span class="token operator">=</span> TextUnit<span class="token punctuation">.</span>Unspecified<span class="token punctuation">,</span>
    overflow<span class="token operator">:</span> TextOverflow <span class="token operator">=</span> TextOverflow<span class="token punctuation">.</span>Clip<span class="token punctuation">,</span>
    softWrap<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    maxLines<span class="token operator">:</span> Int <span class="token operator">=</span> Int<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">,</span>
    onTextLayout<span class="token operator">:</span> <span class="token punctuation">(</span>TextLayoutResult<span class="token punctuation">)</span> <span class="token operator">-></span> Unit <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    style<span class="token operator">:</span> TextStyle <span class="token operator">=</span> LocalTextStyle<span class="token punctuation">.</span>current
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>例如创建一个如下的Composable函数：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Text</span><span class="token punctuation">(</span>
        text <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>jetpack_compose<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// jetpack_compose是app/src/main/res/values/strings.xml中定义的字符串</span>
        fontStyle <span class="token operator">=</span> FontStyle<span class="token punctuation">.</span>Italic<span class="token punctuation">,</span>
        color <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// colorPrimary是app/src/main/res/values/colors.xml中定义的颜色</span>
        fontSize <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
        fontWeight <span class="token operator">=</span> FontWeight<span class="token punctuation">.</span>Bold
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h4><p>在Composable函数上<strong>使用<code>@Preview</code>注解</strong>即可，不通过运行应用程序就能看到修改效果。</p>
<p><img src="https://s2.loli.net/2024/08/23/hLz7XnN8KlAdFaH.png" alt="image-20240823161953571"></p>
<p>使用预览，Composable函数需要满足如下任一条件：</p>
<ol>
<li>没有参数。</li>
<li>所有参数都有默认参数。</li>
<li>提供一个<code>@PreviewParameter</code>以及一个特殊工厂，提供想要在UI上绘制的参数。</li>
</ol>
<hr>
<h4 id="TextField"><a href="#TextField" class="headerlink" title="TextField"></a>TextField</h4><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">package</span> androidx<span class="token punctuation">.</span>compose<span class="token punctuation">.</span>material

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">TextField</span><span class="token punctuation">(</span>
    value<span class="token operator">:</span> String<span class="token punctuation">,</span>
    onValueChange<span class="token operator">:</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    enabled<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    readOnly<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    textStyle<span class="token operator">:</span> TextStyle <span class="token operator">=</span> LocalTextStyle<span class="token punctuation">.</span>current<span class="token punctuation">,</span>
    label<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    placeholder<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    leadingIcon<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    trailingIcon<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    isError<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    visualTransformation<span class="token operator">:</span> VisualTransformation <span class="token operator">=</span> VisualTransformation<span class="token punctuation">.</span>None<span class="token punctuation">,</span>
    keyboardOptions<span class="token operator">:</span> KeyboardOptions <span class="token operator">=</span> KeyboardOptions<span class="token punctuation">.</span>Default<span class="token punctuation">,</span>
    keyboardActions<span class="token operator">:</span> KeyboardActions <span class="token operator">=</span> <span class="token function">KeyboardActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    singleLine<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    maxLines<span class="token operator">:</span> Int <span class="token operator">=</span> Int<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">,</span>
    interactionSource<span class="token operator">:</span> MutableInteractionSource <span class="token operator">=</span> remember <span class="token punctuation">&#123;</span> <span class="token function">MutableInteractionSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    shape<span class="token operator">:</span> Shape <span class="token operator">=</span>
    MaterialTheme<span class="token punctuation">.</span>shapes<span class="token punctuation">.</span>small<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>bottomEnd <span class="token operator">=</span> ZeroCornerSize<span class="token punctuation">,</span> bottomStart <span class="token operator">=</span> ZeroCornerSize<span class="token punctuation">)</span><span class="token punctuation">,</span>
    colors<span class="token operator">:</span> TextFieldColors <span class="token operator">=</span> TextFieldDefaults<span class="token punctuation">.</span><span class="token function">textFieldColors</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>TextField是用于输入字段的组件。TextField允许用户输入文本，并且如果TextField重新组合，输入的文本也不能消失或变更。<strong>要使TextField正常工作，必须提供一个重构期间不会更改的值，即状态值</strong>。<strong>使用<code>mutableStateOf()</code>函数，可以将一个空String包装到一个状态容器中，将使用它来存储和显示输入字段中的文本</strong>。</p>
<p>例如：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyTextField</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">val</span> textValue <span class="token operator">=</span> remember <span class="token punctuation">&#123;</span>
        <span class="token function">mutableStateOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">""</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">TextField</span><span class="token punctuation">(</span>
        <span class="token comment">// 显示TextField内的当前文本</span>
        value <span class="token operator">=</span> textValue<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
        <span class="token comment">// 每次输入新内容时，触发的回调。提供新的 TextFieldValue，以便更新显示的文本。</span>
        onValueChange <span class="token operator">=</span> <span class="token punctuation">&#123;</span> textValue<span class="token punctuation">.</span>value <span class="token operator">=</span> it <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// 标签：容器内显示的标签。当用户输入文本时，标签将在书写光标上方动态显示。</span>
        label <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>remember()</code>能在改变状态时，保留设置的内容。如果不使用<code>remember()</code>，在**改变状态（每次用户点击键盘上的键，内部状态都会发生变化）**时，会丢失设置，并使用默认值（空字符串）。</li>
</ul>
<img src="https://s2.loli.net/2024/08/25/CnGb1dBNYhkZOMi.png" alt="image-20240825173101612" style="zoom:80%;" />

<img src="https://s2.loli.net/2024/08/25/X69kUeFWP1JVb4S.png" alt="image-20240825173029465" style="zoom:80%;" />

<hr>
<h5 id="使用-OutlinedTextField-添加Email字段"><a href="#使用-OutlinedTextField-添加Email字段" class="headerlink" title="使用 OutlinedTextField 添加Email字段"></a>使用 OutlinedTextField 添加Email字段</h5><p>OutlinedTextField 是一个<strong>样式化的 TextField</strong>，它使用一个特殊的内部函数来绘制和动画化字段周围的边框和描述文本。</p>
<p>要添加提示或 Compose 中已知的标签，使用 label 属性并传入另一个composable函数。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token annotation builtin">@Preview</span><span class="token punctuation">(</span>showBackground <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">MyTextField</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">val</span> textValue <span class="token operator">=</span> remember <span class="token punctuation">&#123;</span>
        <span class="token function">mutableStateOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">""</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">val</span> primaryColor <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span>

    <span class="token function">OutlinedTextField</span><span class="token punctuation">(</span>
        <span class="token comment">// 显示TextField内的当前文本</span>
        value <span class="token operator">=</span> textValue<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
        <span class="token comment">// 每次输入新内容时，触发的回调。提供新的 TextFieldValue，以便更新显示的文本。</span>
        onValueChange <span class="token operator">=</span> <span class="token punctuation">&#123;</span> textValue<span class="token punctuation">.</span>value <span class="token operator">=</span> it <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// 标签：容器内显示的标签。当用户输入文本时，标签将在书写光标上方动态显示。</span>
        label <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// 通过Text函数向用户提供输入数据的提示</span>
            <span class="token function">Text</span><span class="token punctuation">(</span>
                text <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        colors <span class="token operator">=</span> TextFieldDefaults<span class="token punctuation">.</span><span class="token function">outlinedTextFieldColors</span><span class="token punctuation">(</span>
            focusedBorderColor <span class="token operator">=</span> primaryColor<span class="token punctuation">,</span> <span class="token comment">// 边框颜色</span>
            focusedLabelColor <span class="token operator">=</span> primaryColor<span class="token punctuation">,</span> <span class="token comment">// 处于聚焦状态的标签颜色</span>
            cursorColor <span class="token operator">=</span> primaryColor <span class="token comment">// 光标颜色</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 显示一个适合输入电子邮件地址的虚拟键盘，通常会包含一个方便输入“@”符号和“.”符号的布局</span>
        keyboardOptions <span class="token operator">=</span> KeyboardOptions<span class="token punctuation">.</span>Default<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>keyboardType <span class="token operator">=</span> KeyboardType<span class="token punctuation">.</span>Email<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>效果：</p>
<img src="https://s2.loli.net/2024/08/25/oBz8nRv4mtaUHZe.png" style="zoom: 80%;" />

<img src="https://s2.loli.net/2024/08/25/PV98csde3xnESCZ.png" alt="image-20240825172421221" style="zoom:80%;" />

<hr>
<h4 id="Button-1"><a href="#Button-1" class="headerlink" title="Button"></a>Button</h4><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">package</span> androidx<span class="token punctuation">.</span>compose<span class="token punctuation">.</span>material

<span class="token annotation builtin">@OptIn</span><span class="token punctuation">(</span>ExperimentalMaterialApi<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">Button</span><span class="token punctuation">(</span>
    onClick<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    enabled<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    interactionSource<span class="token operator">:</span> MutableInteractionSource <span class="token operator">=</span> remember <span class="token punctuation">&#123;</span> <span class="token function">MutableInteractionSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    elevation<span class="token operator">:</span> ButtonElevation<span class="token operator">?</span> <span class="token operator">=</span> ButtonDefaults<span class="token punctuation">.</span><span class="token function">elevation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    shape<span class="token operator">:</span> Shape <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>shapes<span class="token punctuation">.</span>small<span class="token punctuation">,</span>
    border<span class="token operator">:</span> BorderStroke<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    colors<span class="token operator">:</span> ButtonColors <span class="token operator">=</span> ButtonDefaults<span class="token punctuation">.</span><span class="token function">buttonColors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    contentPadding<span class="token operator">:</span> PaddingValues <span class="token operator">=</span> ButtonDefaults<span class="token punctuation">.</span>ContentPadding<span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> RowScope<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Button</span><span class="token punctuation">(</span>
        <span class="token comment">// 空的lambda表达式，点击按钮时不执行操作，但会保持onClick的启用状态</span>
        onClick <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置按钮背景色</span>
        colors <span class="token operator">=</span> ButtonDefaults<span class="token punctuation">.</span><span class="token function">buttonColors</span><span class="token punctuation">(</span>backgroundColor <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置按钮边框，每个BorderStroke都必须定义一个宽度和颜色</span>
        border <span class="token operator">=</span> <span class="token function">BorderStroke</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> color <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimaryDark<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">Text</span><span class="token punctuation">(</span>
            text <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>button_text<span class="token punctuation">)</span><span class="token punctuation">,</span>
            color <span class="token operator">=</span> Color<span class="token punctuation">.</span>White
        <span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h5 id="RadioButton"><a href="#RadioButton" class="headerlink" title="RadioButton"></a>RadioButton</h5><p>目前，Jetpack Compose 没有单选组的实现，必须自己创建自定义组。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">RadioButton</span><span class="token punctuation">(</span>
    selected<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    onClick<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    enabled<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    interactionSource<span class="token operator">:</span> MutableInteractionSource <span class="token operator">=</span> remember <span class="token punctuation">&#123;</span> <span class="token function">MutableInteractionSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    colors<span class="token operator">:</span> RadioButtonColors <span class="token operator">=</span> RadioButtonDefaults<span class="token punctuation">.</span><span class="token function">colors</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyRadioGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">val</span> radioButtons <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 单选按钮的索引</span>
    <span class="token keyword">val</span> selectedButton <span class="token operator">=</span> remember <span class="token punctuation">&#123;</span> <span class="token comment">// remember 用于在组合过程中记住状态，确保在重组时保持状态不变。</span>
        <span class="token function">mutableStateOf</span><span class="token punctuation">(</span>radioButtons<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// mutableStateOf 用于创建一个可变的状态对象，默认选择第一个按钮</span>
    <span class="token punctuation">&#125;</span>
    Column <span class="token punctuation">&#123;</span> <span class="token comment">// 一个垂直布局容器</span>
        radioButtons<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">&#123;</span> index <span class="token operator">-></span> <span class="token comment">// 遍历 radioButtons 列表中的每个索引，执行如下操作</span>
            <span class="token keyword">val</span> isSelected <span class="token operator">=</span> index <span class="token operator">==</span> selectedButton<span class="token punctuation">.</span>value
            <span class="token comment">// 设置不同状态的颜色</span>
            <span class="token keyword">val</span> colors <span class="token operator">=</span> RadioButtonDefaults<span class="token punctuation">.</span><span class="token function">colors</span><span class="token punctuation">(</span>
                selectedColor <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span><span class="token punctuation">,</span>
                unselectedColor <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimaryDark<span class="token punctuation">)</span><span class="token punctuation">,</span>
                disabledColor <span class="token operator">=</span> Color<span class="token punctuation">.</span>LightGray
            <span class="token punctuation">)</span>
            <span class="token function">RadioButton</span><span class="token punctuation">(</span> <span class="token comment">// 向Column添加一个按钮</span>
                selected <span class="token operator">=</span> isSelected<span class="token punctuation">,</span>
                <span class="token comment">// 当按钮被点击时，更新 selectedButton 的值为当前按钮的索引，表示用户选择了这个按钮。</span>
                onClick <span class="token operator">=</span> <span class="token punctuation">&#123;</span> selectedButton<span class="token punctuation">.</span>value <span class="token operator">=</span> index <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                colors <span class="token operator">=</span> colors
            <span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h5 id="FloatingActionButton"><a href="#FloatingActionButton" class="headerlink" title="FloatingActionButton"></a>FloatingActionButton</h5><p>浮动操作按钮之所以被称为“浮动”，是因为它们具有更高的高度，<strong>使其位于所有内容之上</strong>。它们被用来将应用程序的主要操作放在用户触手可及的地方。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@OptIn</span><span class="token punctuation">(</span>ExperimentalMaterialApi<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">FloatingActionButton</span><span class="token punctuation">(</span>
    onClick<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    interactionSource<span class="token operator">:</span> MutableInteractionSource <span class="token operator">=</span> remember <span class="token punctuation">&#123;</span> <span class="token function">MutableInteractionSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    shape<span class="token operator">:</span> Shape <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>shapes<span class="token punctuation">.</span>small<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token function">CornerSize</span><span class="token punctuation">(</span>percent <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    backgroundColor<span class="token operator">:</span> Color <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>colors<span class="token punctuation">.</span>secondary<span class="token punctuation">,</span>
    contentColor<span class="token operator">:</span> Color <span class="token operator">=</span> <span class="token function">contentColorFor</span><span class="token punctuation">(</span>backgroundColor<span class="token punctuation">)</span><span class="token punctuation">,</span>
    elevation<span class="token operator">:</span> FloatingActionButtonElevation <span class="token operator">=</span> FloatingActionButtonDefaults<span class="token punctuation">.</span><span class="token function">elevation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

 <pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyFloatingActionButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">FloatingActionButton</span><span class="token punctuation">(</span>
        onClick <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// 空的lambda表达式，点击按钮时不执行操作，但会保持onClick的启用状态</span>
        backgroundColor <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span><span class="token punctuation">,</span>
        contentColor <span class="token operator">=</span> Color<span class="token punctuation">.</span>White<span class="token punctuation">,</span>
        content <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// contentDescription 用于无障碍支持（如屏幕阅读器），帮助视觉障碍用户理解按钮的功能。</span>
            <span class="token function">Icon</span><span class="token punctuation">(</span>Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>Favorite<span class="token punctuation">,</span> contentDescription <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Test FAB"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>大多数情况下，需要对<code>content</code>添加<code>Icon()</code>。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token annotation builtin">@NonRestartableComposable</span>
<span class="token keyword">fun</span> <span class="token function">Icon</span><span class="token punctuation">(</span>
    imageVector<span class="token operator">:</span> ImageVector<span class="token punctuation">,</span>
    contentDescription<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    tint<span class="token operator">:</span> Color <span class="token operator">=</span> LocalContentColor<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>alpha <span class="token operator">=</span> LocalContentAlpha<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Icon的主要特点是允许设置<code>ImageVector</code>类型的向量用作图标。</p>
<hr>
<h5 id="其他Button"><a href="#其他Button" class="headerlink" title="其他Button"></a>其他Button</h5><ul>
<li>IconButton：类似FloatingActionButton，但它没有浮动。通常用于导航。</li>
<li>OutlinedButton：与OutlinedTextField类似，提供额外的功能，如边框。</li>
<li>IconToggleButton：具有两种图标状态，可以打开和关闭它们。</li>
<li>TextButton：最常见于卡片和对话框中，可以执行不太明显的操作。</li>
</ul>
<hr>
<h4 id="Progress-Bars"><a href="#Progress-Bars" class="headerlink" title="Progress Bars"></a>Progress Bars</h4><p>当执行长时间的操作（例如从服务器或数据库获取数据）时，最好显示进度条。进度条通过显示动画来减少等待时间过长的感觉，并让用户感觉到正在发生某些事情。</p>
<hr>
<h5 id="CircularProgressIndicator"><a href="#CircularProgressIndicator" class="headerlink" title="CircularProgressIndicator"></a>CircularProgressIndicator</h5><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">CircularProgressIndicator</span><span class="token punctuation">(</span>
    <span class="token comment">/*@FloatRange(from = 0.0, to = 1.0)*/</span>
    progress<span class="token operator">:</span> Float<span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    color<span class="token operator">:</span> Color <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>colors<span class="token punctuation">.</span>primary<span class="token punctuation">,</span>
    strokeWidth<span class="token operator">:</span> Dp <span class="token operator">=</span> ProgressIndicatorDefaults<span class="token punctuation">.</span>StrokeWidth
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>如果您不设置进度progress，进度条将运行无限旋转动画。</p>
<hr>
<h5 id="LinearProgressIndicator"><a href="#LinearProgressIndicator" class="headerlink" title="LinearProgressIndicator"></a>LinearProgressIndicator</h5><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">LinearProgressIndicator</span><span class="token punctuation">(</span>
    <span class="token comment">/*@FloatRange(from = 0.0, to = 1.0)*/</span>
    progress<span class="token operator">:</span> Float<span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    color<span class="token operator">:</span> Color <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>colors<span class="token punctuation">.</span>primary<span class="token punctuation">,</span>
    backgroundColor<span class="token operator">:</span> Color <span class="token operator">=</span> color<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>alpha <span class="token operator">=</span> IndicatorBackgroundOpacity<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<p>示例：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">ProgressIndicatorScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

    <span class="token function">Column</span><span class="token punctuation">(</span>
        modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        horizontalAlignment <span class="token operator">=</span> Alignment<span class="token punctuation">.</span>CenterHorizontally<span class="token punctuation">,</span>
        verticalArrangement <span class="token operator">=</span> Arrangement<span class="token punctuation">.</span>Center
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">CircularProgressIndicator</span><span class="token punctuation">(</span> <span class="token comment">// 旋转动画进度条</span>
            color <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span><span class="token punctuation">,</span>
            strokeWidth <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">.</span>dp
        <span class="token punctuation">)</span>
        <span class="token function">LinearProgressIndicator</span><span class="token punctuation">(</span>progress <span class="token operator">=</span> <span class="token number">0.5f</span><span class="token punctuation">)</span> <span class="token comment">// 线性进度条，进度设置为0.5</span>
    <span class="token punctuation">&#125;</span>

    BackButtonHandler <span class="token punctuation">&#123;</span>
        JetFundamentalsRouter<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span>Screen<span class="token punctuation">.</span>Navigation<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="AlertDialog-1"><a href="#AlertDialog-1" class="headerlink" title="AlertDialog"></a>AlertDialog</h4><p>对话框用于提醒用户有关操作的信息，或请求确认。例如，您可以使用对话框来确认用户是否要删除某个项目、请求他们对应用程序进行评分等。使用对话框最重要的部分是处理确定何时显示或关闭该对话框的状态。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">AlertDialog</span><span class="token punctuation">(</span>
    onDismissRequest<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">,</span>
    confirmButton<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    dismissButton<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    shape<span class="token operator">:</span> Shape <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>shapes<span class="token punctuation">.</span>medium<span class="token punctuation">,</span>
    backgroundColor<span class="token operator">:</span> Color <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>colors<span class="token punctuation">.</span>surface<span class="token punctuation">,</span>
    contentColor<span class="token operator">:</span> Color <span class="token operator">=</span> <span class="token function">contentColorFor</span><span class="token punctuation">(</span>backgroundColor<span class="token punctuation">)</span><span class="token punctuation">,</span>
    properties<span class="token operator">:</span> DialogProperties <span class="token operator">=</span> <span class="token function">DialogProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>onDismissRequest</code>：回调函数，当对话框被请求关闭时执行（<strong>点击对话框外部、按下返回键</strong>）</li>
<li><code>confirmButton</code>：确认操作</li>
<li><code>dismissButton</code>：关闭操作</li>
</ul>
<hr>
<h3 id="Layout-布局"><a href="#Layout-布局" class="headerlink" title="Layout 布局"></a>Layout 布局</h3><h4 id="Linear-Layouts"><a href="#Linear-Layouts" class="headerlink" title="Linear Layouts"></a>Linear Layouts</h4><p>LinearLayout 的特征是将其子项定位在线性流中。此流称为方向，可以是水平或垂直的。在 Jetpack Compose 中，有两个不同的可组合函数可以替换 LinearLayout，每个方向一个。</p>
<h5 id="Row-行"><a href="#Row-行" class="headerlink" title="Row 行"></a>Row 行</h5><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token function">Row</span><span class="token punctuation">(</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    horizontalArrangement<span class="token operator">:</span> Arrangement<span class="token punctuation">.</span>Horizontal <span class="token operator">=</span> Arrangement<span class="token punctuation">.</span>Start<span class="token punctuation">,</span>
    verticalAlignment<span class="token operator">:</span> Alignment<span class="token punctuation">.</span>Vertical <span class="token operator">=</span> Alignment<span class="token punctuation">.</span>Top<span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> RowScope<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><strong>horizontal Arrangement</strong>包括：<ul>
<li><code>SpaceBetween</code>：为每个子对象放置相等的间距，<strong>不计算第一个子对象之前或最后一个子对象之后的间距</strong>。</li>
<li><code>SpaceEvenly</code>：为每个子对象放置相等的间距，<strong>包括起始和结束间距</strong>。</li>
<li><code>SpaceAround</code>：和<code>SpaceEvenly</code>一样放置子项，但<strong>连续子项之间的间距减少一半</strong>。</li>
<li><code>Center</code>、<code>Start</code>、<code>End</code>：将子项置于中心、开头、末尾。<strong>子项之间没有空格</strong>。</li>
</ul>
</li>
<li>vertical Alignment包括：<ul>
<li><code>Top</code>：将子项与父项的顶部对齐。</li>
<li><code>CenterVertically</code>：将子项垂直对齐父项的中心。</li>
<li><code>Bottom</code>：将子项与父项的底部对齐。</li>
</ul>
</li>
</ul>
<p>在 Row 中定位子项的最后一种方法是使用<strong>权重</strong>。要添加权重，需要使用特殊方式从 Compose 访问 <code>weight()</code> 修饰符。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Row</span><span class="token punctuation">(</span>
        verticalAlignment <span class="token operator">=</span> Alignment<span class="token punctuation">.</span>CenterVertically<span class="token punctuation">,</span> <span class="token comment">// 垂直居中</span>
        horizontalArrangement <span class="token operator">=</span> Arrangement<span class="token punctuation">.</span>SpaceEvenly<span class="token punctuation">,</span> <span class="token comment">// 水平等距离排列</span>
        modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 布局填满屏幕。如果不填充屏幕大小，排列和对齐就无关紧要，所有项目都会一个接一个地放在屏幕的左上角。</span>
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        THREE_ELEMENT_LIST<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">&#123;</span> textResId <span class="token operator">-></span>
            <span class="token function">Text</span><span class="token punctuation">(</span>
                text <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> textResId<span class="token punctuation">)</span><span class="token punctuation">,</span>
                fontSize <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">.</span>sp
            <span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h5 id="Column-列"><a href="#Column-列" class="headerlink" title="Column 列"></a>Column 列</h5><pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Column</span><span class="token punctuation">(</span>
        horizontalAlignment <span class="token operator">=</span> Alignment<span class="token punctuation">.</span>CenterHorizontally<span class="token punctuation">,</span>
        verticalArrangement <span class="token operator">=</span> Arrangement<span class="token punctuation">.</span>SpaceEvenly<span class="token punctuation">,</span>
        modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        THREE_ELEMENT_LIST<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">&#123;</span> textResId <span class="token operator">-></span>
            <span class="token function">Text</span><span class="token punctuation">(</span>
                text <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> textResId<span class="token punctuation">)</span><span class="token punctuation">,</span>
                fontSize <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">.</span>sp
            <span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="Box"><a href="#Box" class="headerlink" title="Box"></a>Box</h4><p>Box用于<strong>相对于父组件的边缘显示子组件，并允许叠放子组件</strong>。当需要在特定位置显示元素或希望显示重叠元素（如对话框）时，非常有用。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token function">Box</span><span class="token punctuation">(</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    contentAlignment<span class="token operator">:</span> Alignment <span class="token operator">=</span> Alignment<span class="token punctuation">.</span>TopStart<span class="token punctuation">,</span>
    propagateMinConstraints<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> BoxScope<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>contentAlignment</code>：用于修改子组件的外观和行为。如果想在每个子项之间有不同的Alignment，需要在子项上使用<code>Modifier.align()</code>设置Alignment。<ul>
<li>TopStart</li>
<li>TopCenter</li>
<li>TopEnd</li>
<li>CenterStart</li>
<li>Center</li>
<li>CenterEnd</li>
<li>BottomStart</li>
<li>BottomCenter</li>
<li>BottomEnd</li>
</ul>
</li>
<li><code>propagateMinConstraints</code>：是否传递最小约束并将其用于内容。</li>
</ul>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyBox</span><span class="token punctuation">(</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span> <span class="token comment">// 用于修改组件的外观和行为</span>
    contentModifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier <span class="token comment">// 用于修改子组件的外观和行为</span>
<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Box</span><span class="token punctuation">(</span>modifier <span class="token operator">=</span> modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">Text</span><span class="token punctuation">(</span>
            text <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">,</span>
            fontSize <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
            modifier <span class="token operator">=</span> contentModifier<span class="token punctuation">.</span><span class="token function">align</span><span class="token punctuation">(</span>Alignment<span class="token punctuation">.</span>TopStart<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>

        <span class="token function">Text</span><span class="token punctuation">(</span>
            text <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">,</span>
            fontSize <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
            modifier <span class="token operator">=</span> contentModifier<span class="token punctuation">.</span><span class="token function">align</span><span class="token punctuation">(</span>Alignment<span class="token punctuation">.</span>Center<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>

        <span class="token function">Text</span><span class="token punctuation">(</span>
            text <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>third<span class="token punctuation">)</span><span class="token punctuation">,</span>
            fontSize <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
            modifier <span class="token operator">=</span> contentModifier<span class="token punctuation">.</span><span class="token function">align</span><span class="token punctuation">(</span>Alignment<span class="token punctuation">.</span>BottomEnd<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>当 Box 中有多个子项时，<strong>它们的渲染顺序与你将它们放置在 Box 中的顺序相同</strong>。</p>
<hr>
<h4 id="Surface"><a href="#Surface" class="headerlink" title="Surface"></a>Surface</h4><p>Surface 的独特之处在于<strong>它一次只能容纳一个子对象</strong>，但它为子对象的内容提供了许多样式处理，例如高度、边框等。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">Surface</span><span class="token punctuation">(</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    shape<span class="token operator">:</span> Shape <span class="token operator">=</span> RectangleShape<span class="token punctuation">,</span> <span class="token comment">// 定义Surface的形状及其阴影。</span>
    color<span class="token operator">:</span> Color <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>colors<span class="token punctuation">.</span>surface<span class="token punctuation">,</span> 
    contentColor<span class="token operator">:</span> Color <span class="token operator">=</span> <span class="token function">contentColorFor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">,</span>
    border<span class="token operator">:</span> BorderStroke<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    elevation<span class="token operator">:</span> Dp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> <span class="token comment">// 设置标高并绘制适当的阴影。</span>
    content<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>使用 Surface 的最常见方式是<strong>作为组件的根布局</strong>。由于它只能容纳一个 child，因此<strong>该 child 通常是定位其余元素的另一个布局</strong>。<strong><code>Surface()</code> 不处理定位，它的子项处理</strong>。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MySurface</span><span class="token punctuation">(</span>modifier<span class="token operator">:</span> Modifier<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Surface</span><span class="token punctuation">(</span>
        modifier <span class="token operator">=</span> modifier<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 设置高宽</span>
        color <span class="token operator">=</span> Color<span class="token punctuation">.</span>LightGray<span class="token punctuation">,</span>
        contentColor <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span><span class="token punctuation">,</span>
        elevation <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> <span class="token comment">// 设置标高，将 Surface 升高到其他元素之上</span>
        border <span class="token operator">=</span> <span class="token function">BorderStroke</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>Black<span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">MyColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 自定义的 Column</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>有一种名为 Card 的常用自定义 Surface 实现。一个Card有完全相同的五个用途，只能容纳一个子组件。Card 和 Surface 之间的唯一区别是其默认参数。Card 具有预定义的标高，并使用带圆角的 Material 主题形状。</p>
</blockquote>
<hr>
<h4 id="Scaffold"><a href="#Scaffold" class="headerlink" title="Scaffold"></a>Scaffold</h4><p>可以使用Scaffold来<strong>实现一个可视化布局</strong>，该布局遵循标准 Material Design 结构。它结合了几种不同的组件来构建整个屏幕。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyScaffold</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 这种状态管理允许控制 Scaffold 的行为，例如打开或关闭抽屉（Drawer）或显示 SnackBar。</span>
    <span class="token keyword">val</span> scaffoldState<span class="token operator">:</span> ScaffoldState <span class="token operator">=</span> <span class="token function">rememberScaffoldState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 该作用域可以用于启动协程，通常用于执行异步任务，例如在抽屉打开时执行某些操作</span>
    <span class="token keyword">val</span> scope<span class="token operator">:</span> CoroutineScope <span class="token operator">=</span> <span class="token function">rememberCoroutineScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token function">Scaffold</span><span class="token punctuation">(</span>
        scaffoldState <span class="token operator">=</span> scaffoldState<span class="token punctuation">,</span>
        contentColor <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span><span class="token punctuation">,</span>
        content <span class="token operator">=</span> <span class="token punctuation">&#123;</span> paddingValues <span class="token operator">-></span> <span class="token comment">// paddingValues 参数的使用确保内容不会被应用程序栏遮挡</span>
            <span class="token function">MyRow</span><span class="token punctuation">(</span>modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span>paddingValues<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// 定义顶部应用栏</span>
        topBar <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token function">MyTopAppBar</span><span class="token punctuation">(</span>scaffoldState <span class="token operator">=</span> scaffoldState<span class="token punctuation">,</span> scope <span class="token operator">=</span> scope<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// 定义底部应用栏</span>
        bottomBar <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token function">MyBottomAppBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// 定义抽屉内容</span>
        drawerContent <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token function">MyColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyTopAppBar</span><span class="token punctuation">(</span>
    scaffoldState<span class="token operator">:</span> ScaffoldState<span class="token punctuation">,</span> <span class="token comment">// 管理 Scaffold 的状态，包括抽屉的状态。</span>
    scope<span class="token operator">:</span> CoroutineScope <span class="token comment">// 用于启动协程的作用域，允许在按钮点击时执行异步操作。</span>
<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">val</span> drawerState <span class="token operator">=</span> scaffoldState<span class="token punctuation">.</span>drawerState <span class="token comment">// 以便后续操作可以控制抽屉的打开与关闭状态。</span>

    <span class="token function">TopAppBar</span><span class="token punctuation">(</span> <span class="token comment">// 顶部应用栏，通常用于显示应用程序的标题和导航图标。</span>
        navigationIcon <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 定义顶部应用栏的导航图标部分</span>
            <span class="token function">IconButton</span><span class="token punctuation">(</span> <span class="token comment">// 创建一个图标按钮，用户可以点击它来打开或关闭抽屉。</span>
                onClick <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
                    scope<span class="token punctuation">.</span><span class="token function">launch</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 启动一个协程</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>drawerState<span class="token punctuation">.</span>isClosed<span class="token punctuation">)</span>
                            drawerState<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token keyword">else</span>
                            drawerState<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                content <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
                    <span class="token function">Icon</span><span class="token punctuation">(</span> <span class="token comment">// 创建一个图标表示菜单</span>
                        imageVector <span class="token operator">=</span> Icons<span class="token punctuation">.</span>Default<span class="token punctuation">.</span>Menu<span class="token punctuation">,</span>
                        contentDescription <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>menu<span class="token punctuation">)</span><span class="token punctuation">,</span>
                        tint <span class="token operator">=</span> Color<span class="token punctuation">.</span>White
                    <span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        title <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 顶部应用栏的标题</span>
            <span class="token function">Text</span><span class="token punctuation">(</span>
                text <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>app_name<span class="token punctuation">)</span><span class="token punctuation">,</span>
                color <span class="token operator">=</span> Color<span class="token punctuation">.</span>White
            <span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        backgroundColor <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyBottomAppBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">BottomAppBar</span><span class="token punctuation">(</span>
        content <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        backgroundColor <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<img src="https://s2.loli.net/2024/08/27/nS7Xd4Apgao8qQW.png" style="zoom:80%;" />

<img src="https://s2.loli.net/2024/08/27/pXzCfiuhVIs6HUw.png" alt="image-20240827195217341" style="zoom:80%;" />

<hr>
<h3 id="构建Lists"><a href="#构建Lists" class="headerlink" title="构建Lists"></a>构建Lists</h3><h4 id="Scrolling-Modifier"><a href="#Scrolling-Modifier" class="headerlink" title="Scrolling Modifier"></a>Scrolling Modifier</h4><p>在Jetpack Compose中，可以将<strong>Column</strong>和<strong>支持滚动的modifier</strong>一起使用。</p>
<p>实现一个简单的滚动Column：</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyScrollingScreen</span><span class="token punctuation">(</span>modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Column</span><span class="token punctuation">(</span>
        <span class="token comment">// 根据滚动方向创建滚动状态，并保留滚动位置</span>
        modifier <span class="token operator">=</span> modifier<span class="token punctuation">.</span><span class="token function">verticalScroll</span><span class="token punctuation">(</span><span class="token function">rememberScrollState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">BookImage</span><span class="token punctuation">(</span>
            imageResId <span class="token operator">=</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>advanced_architecture_android<span class="token punctuation">,</span>
            contentDescriptionResId <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>advanced_architecture_android
        <span class="token punctuation">)</span>
        <span class="token function">BookImage</span><span class="token punctuation">(</span>
            imageResId <span class="token operator">=</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>kotlin_aprentice<span class="token punctuation">,</span>
            contentDescriptionResId <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>kotlin_apprentice
        <span class="token punctuation">)</span>
        <span class="token function">BookImage</span><span class="token punctuation">(</span>
            imageResId <span class="token operator">=</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>kotlin_coroutines<span class="token punctuation">,</span>
            contentDescriptionResId <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>kotlin_coroutines
        <span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">BookImage</span><span class="token punctuation">(</span><span class="token annotation builtin">@DrawableRes</span> imageResId<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token annotation builtin">@StringRes</span> contentDescriptionResId<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Image</span><span class="token punctuation">(</span>
        bitmap <span class="token operator">=</span> ImageBitmap<span class="token punctuation">.</span><span class="token function">imageResource</span><span class="token punctuation">(</span>imageResId<span class="token punctuation">)</span><span class="token punctuation">,</span>
        contentDescription <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>contentDescriptionResId<span class="token punctuation">)</span><span class="token punctuation">,</span>
        contentScale <span class="token operator">=</span> ContentScale<span class="token punctuation">.</span>FillBounds<span class="token punctuation">,</span>
        modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">476</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> <span class="token number">616</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p>垂直滚动：</p>
  <pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token function">Column</span><span class="token punctuation">(</span>
    <span class="token comment">// 根据滚动方向创建滚动状态，并保留滚动位置</span>
    modifier <span class="token operator">=</span> modifier<span class="token punctuation">.</span><span class="token function">verticalScroll</span><span class="token punctuation">(</span><span class="token function">rememberScrollState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>水平滚动：</p>
  <pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token function">Row</span><span class="token punctuation">(</span>
    <span class="token comment">// 根据滚动方向创建滚动状态，并保留滚动位置</span>
    modifier <span class="token operator">=</span> modifier<span class="token punctuation">.</span><span class="token function">horizontalScroll</span><span class="token punctuation">(</span><span class="token function">rememberScrollState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p><strong>当拥有静态内容时，可滚动的列和行非常有用</strong>。但是，对于<strong>动态的数据收集</strong>，它们不是一个好主意。这是因为<strong>可滚动可组合项会急切地组合和渲染其中的所有元素，当您要显示大量元素时，这可能是一个繁重的操作</strong>。</p>
<hr>
<h4 id="LazyColumn-和-LazyRow"><a href="#LazyColumn-和-LazyRow" class="headerlink" title="LazyColumn 和 LazyRow"></a>LazyColumn 和 LazyRow</h4><p>当使用 LazyColumn 或 LazyRow 时，<strong>框架仅会组合能够在屏幕上显示的元素</strong>。当你滚动时，会组合新的元素，并且旧的元素会被销毁。当你向回滚动时，旧的元素会重新组合。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">LazyColumn</span><span class="token punctuation">(</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    state<span class="token operator">:</span> LazyListState <span class="token operator">=</span> <span class="token function">rememberLazyListState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    contentPadding<span class="token operator">:</span> PaddingValues <span class="token operator">=</span> <span class="token function">PaddingValues</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">,</span>
    reverseLayout<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    verticalArrangement<span class="token operator">:</span> Arrangement<span class="token punctuation">.</span>Vertical <span class="token operator">=</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>reverseLayout<span class="token punctuation">)</span> Arrangement<span class="token punctuation">.</span>Top <span class="token keyword">else</span> Arrangement<span class="token punctuation">.</span>Bottom<span class="token punctuation">,</span>
    horizontalAlignment<span class="token operator">:</span> Alignment<span class="token punctuation">.</span>Horizontal <span class="token operator">=</span> Alignment<span class="token punctuation">.</span>Start<span class="token punctuation">,</span>
    flingBehavior<span class="token operator">:</span> FlingBehavior <span class="token operator">=</span> ScrollableDefaults<span class="token punctuation">.</span><span class="token function">flingBehavior</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    userScrollEnabled<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> LazyListScope<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>其中<strong>最重要的参数</strong>是 <code>content</code>，它表示列表中的内容。此内容属于 <strong><code>LazyListScope</code> 类型</strong>，而不是通常的 Composable 类型。</p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token annotation builtin">@LazyScopeMarker</span>
<span class="token annotation builtin">@JvmDefaultWithCompatibility</span>
<span class="token keyword">interface</span> LazyListScope <span class="token punctuation">&#123;</span>
    <span class="token keyword">fun</span> <span class="token function">item</span><span class="token punctuation">(</span>
        key<span class="token operator">:</span> Any<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        contentType<span class="token operator">:</span> Any<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> LazyItemScope<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">error</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"The method is not implemented"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">fun</span> <span class="token function">items</span><span class="token punctuation">(</span>
        count<span class="token operator">:</span> Int<span class="token punctuation">,</span>
        key<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">-></span> Any<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        contentType<span class="token operator">:</span> <span class="token punctuation">(</span>index<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">-></span> Any<span class="token operator">?</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token keyword">null</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        itemContent<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> LazyItemScope<span class="token punctuation">.</span><span class="token punctuation">(</span>index<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">-></span> Unit
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">error</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"The method is not implemented"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation builtin">@ExperimentalFoundationApi</span>
    <span class="token keyword">fun</span> <span class="token function">stickyHeader</span><span class="token punctuation">(</span>
        key<span class="token operator">:</span> Any<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        contentType<span class="token operator">:</span> Any<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token annotation builtin">@Composable</span> LazyItemScope<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> Unit
    <span class="token punctuation">)</span>   
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>item()</code>允许向列表中添加新的组合项。<strong>每次都可以使用不同的组合项类型</strong>。</li>
<li><code>items()</code>允许设置一个 包含希望在每个列表项中使用的数据 的列表。一旦设置了数据，还需要提供一个 <code>itemContent</code>，它是一个用于<strong>显示列表中每个项</strong>的可组合项。</li>
<li><code>stickyHeader()</code>允许设置一个头部可组合项，它会一直显示在列表的顶部，即使你向下滚动查看新项目时也是如此。</li>
</ul>
<p>示例：</p>
<p><img src="https://s2.loli.net/2024/08/27/J6uNxqoGTtDVCKE.png" alt="image-20240827201534145"></p>
<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">val</span> bookInfo <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span>
    <span class="token function">BookCategory</span><span class="token punctuation">(</span>
        R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>android<span class="token punctuation">,</span>
        <span class="token function">listOf</span><span class="token punctuation">(</span>
            R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>android_aprentice<span class="token punctuation">,</span>
            R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>saving_data_android<span class="token punctuation">,</span>
            R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>advanced_architecture_android
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">BookCategory</span><span class="token punctuation">(</span>
        R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>kotlin<span class="token punctuation">,</span>
        <span class="token function">listOf</span><span class="token punctuation">(</span>
            R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>kotlin_coroutines<span class="token punctuation">,</span>
            R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>kotlin_aprentice
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">ListScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">MyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    BackButtonHandler <span class="token punctuation">&#123;</span>
        JetFundamentalsRouter<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span>Screen<span class="token punctuation">.</span>Navigation<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">MyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    LazyColumn <span class="token punctuation">&#123;</span> <span class="token comment">// 垂直滚动的列表</span>
        <span class="token function">items</span><span class="token punctuation">(</span>bookInfo<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// 将items中的每个对象转换为可组合的函数。</span>
                item <span class="token operator">-></span>
            <span class="token function">ListItem</span><span class="token punctuation">(</span>bookCategory <span class="token operator">=</span> item<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">ListItem</span><span class="token punctuation">(</span>bookCategory<span class="token operator">:</span> BookCategory<span class="token punctuation">,</span> modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Column</span><span class="token punctuation">(</span> <span class="token comment">// 垂直排列</span>
        modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span> <span class="token comment">// 在边框附近添加8.dp空间</span>
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">Text</span><span class="token punctuation">(</span>
            text <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> bookCategory<span class="token punctuation">.</span>categoryResourceId<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 类别标题</span>
            fontSize <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
            fontWeight <span class="token operator">=</span> FontWeight<span class="token punctuation">.</span>Bold<span class="token punctuation">,</span>
            color <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token function">Spacer</span><span class="token punctuation">(</span>modifier <span class="token operator">=</span> modifier<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 在类名和其余内容之间添加一些空格，在水平书籍列表的顶部显示类别名称。</span>

        LazyRow <span class="token punctuation">&#123;</span> <span class="token comment">// 水平滚动的列表，书籍图像</span>
            <span class="token function">items</span><span class="token punctuation">(</span>bookCategory<span class="token punctuation">.</span>bookImageResources<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> item <span class="token operator">-></span>
                <span class="token function">BookImage</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">BookCategory</span><span class="token punctuation">(</span><span class="token annotation builtin">@StringRes</span> <span class="token keyword">val</span> categoryResourceId<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">val</span> bookImageResources<span class="token operator">:</span> List<span class="token operator">&lt;</span>Int<span class="token operator">></span><span class="token punctuation">)</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">BookImage</span><span class="token punctuation">(</span>imageResource<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Image</span><span class="token punctuation">(</span> <span class="token comment">// 显示图像</span>
        painter <span class="token operator">=</span> <span class="token function">painterResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> imageResource<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 通过id检索目标资源</span>
        contentDescription <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>book_image<span class="token punctuation">)</span><span class="token punctuation">,</span>
        modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">170</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 显示的宽高</span>
        contentScale <span class="token operator">=</span> ContentScale<span class="token punctuation">.</span>Fit <span class="token comment">// 使图像适应指定的宽高</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="Compose中的Grid"><a href="#Compose中的Grid" class="headerlink" title="Compose中的Grid"></a>Compose中的Grid</h4><p>如图，该网格包含10个元素，分为3列。最后一行的两个元素被标记为不可见，从而达到视觉上10个元素的效果。</p>
<img src="https://s2.loli.net/2024/08/28/cqBDQh5okYt4MKz.png" alt="image-20240828134043557" style="zoom:80%;" />

<pre class="line-numbers language-kotlin" data-language="kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">val</span> filledItems <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span>
    Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>Check<span class="token punctuation">,</span>
    Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>Close<span class="token punctuation">,</span>
    Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>ThumbUp<span class="token punctuation">,</span>
    Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>Build<span class="token punctuation">,</span>
    Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>Delete<span class="token punctuation">,</span>
    Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>Home<span class="token punctuation">,</span>
    Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>Close<span class="token punctuation">,</span>
    Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>ThumbUp<span class="token punctuation">,</span>
    Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>Build<span class="token punctuation">,</span>
    Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>ThumbUp<span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">GridScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">LazyVerticalGrid</span><span class="token punctuation">(</span> <span class="token comment">// 创建垂直网格的容器</span>
        columns <span class="token operator">=</span> GridCells<span class="token punctuation">.</span><span class="token function">Fixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 3列</span>
        modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 网格占据屏幕中的所有可用空间</span>
        content <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            <span class="token function">items</span><span class="token punctuation">(</span>filledItems<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> index <span class="token operator">-></span>
                                     <span class="token function">GridIcon</span><span class="token punctuation">(</span>iconResource <span class="token operator">=</span> filledItems<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 将图标作为参数传入</span>
                                    <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">)</span>

    BackButtonHandler <span class="token punctuation">&#123;</span>
        JetFundamentalsRouter<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span>Screen<span class="token punctuation">.</span>Navigation<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">GridIcon</span><span class="token punctuation">(</span>iconResource<span class="token operator">:</span> ImageVector<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Icon</span><span class="token punctuation">(</span>
        imageVector <span class="token operator">=</span> iconResource<span class="token punctuation">,</span>
        contentDescription <span class="token operator">=</span> <span class="token function">stringResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>grid_icon<span class="token punctuation">)</span><span class="token punctuation">,</span>
        modifier <span class="token operator">=</span> Modifier
        <span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">,</span>
        tint <span class="token operator">=</span> <span class="token function">colorResource</span><span class="token punctuation">(</span>id <span class="token operator">=</span> R<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span> <span class="token comment">// 为图标指定颜色</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="搭建应用Jet-Notes"><a href="#搭建应用Jet-Notes" class="headerlink" title="搭建应用Jet Notes"></a>搭建应用Jet Notes</h3><h4 id="自下而上的构建方法"><a href="#自下而上的构建方法" class="headerlink" title="自下而上的构建方法"></a>自下而上的构建方法</h4><p>使用 Jetpack Compose 构建应用时，明智的做法是<strong>从较小的可组合项开始</strong>，然后逐步构建到设计中。从最小的组件构建应用程序可以从一开始就解耦和复用代码。</p>
<p><img src="https://s2.loli.net/2024/08/28/tZU3ksNxyqH9AD5.png" alt="image-20240828145326151"></p>
<hr>
<h4 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h4><p>先构建Note组件，方便后续复用。</p>
<img src="https://s2.loli.net/2024/08/28/gzXWNeG1RThOjlx.png" alt="image-20240828145440911" style="zoom:80%;" />



<p><img src="https://s2.loli.net/2024/08/28/eMk5nXpBaJ7OdCA.png" alt="image-20240828163426316"></p>
<p><img src="https://s2.loli.net/2024/08/28/bdjyQ3R9WFhmSTt.png" alt="image-20240828163358139"></p>
<p>C:\Users\Hunter\AndroidStudioProjects\jet-materials\08-applying-material-design-to-compose\projects\starter</p>
<p>是这个笔记App最终的代码。</p>
<hr>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Android/" rel="tag"><i class="fa fa-tag"></i> Android</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/08/09/Anaconda/" rel="prev" title="Anaconda">
                  <i class="fa fa-angle-left"></i> Anaconda
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/08/22/Kotlin/" rel="next" title="Kotlin">
                  Kotlin <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Hunter</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"Hunter1023/Hunter1023.github.io","issue_term":"pathname","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
